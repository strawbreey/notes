---
title: "Mysql Design"
date: 2020-11-20T15:24:10+08:00
draft: false
---

### 字符集

统一使用 utf8mb4 MySQL在 5.5.3 之后增加了 utf8mb4 字符编码，简单的说utf8mb4才是真正的utf-8，因为它可以支持4个字节每个字符，ps：当我们要存储emoji表情就必须使用utf8mb4，性能上不会有损失


### 建表规范

- 字段名必须小写
- 小数类型为decimal
- 如果存储的字符串长度几乎相等，使用 char 定长字符串类型（与varchar的区别，例如，存储字符串“abc"，对于char (10)，表示你存储的字符将占10个字节(包括7个空字符)，而同样的varchar (10)则只占用3个字节的长度，10只是最大值，当你存储的字符小于10时，按实际长度存储）

- varchar 是可变长字符串，不会预先分配存储空间，长度不要超过 5000，如果存储长度大于此值，定义字段类型为 text，独立出来一张表，用主键来对应，避免影响其它字段索 引效率 
- 表必备三字段:id, date_create, date_update
- 为避免关连查询，字段允许适当冗余，以高查询性能，但必须考虑数据一致。冗余字段应遵循 1.不是频繁修改的字段 2.不是 varchar 超长字段，更不能是 text 字段
- 合适的字符存储长度，无负数的情况需要使用无符号位存储，扩大表示范围

  ```
    unsigned tinyint	无符号位 0-255    // 一个字节 8 bit 
    unsigned smallint	无符号位 0-65535  // 八个字节
    unsigned int	无符号位 约 0-42.9亿  // 64个字节
    unsigned bigint	无符号位 约 0-10的19次方
  ```
