<!DOCTYPE html>
<html><head>
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

   
    <meta name="author" content="Sukoshi">
  

   
    
    
    
    
    
    
    <meta name="keywords" content="theme,kagome">
  

  

  <meta name="generator" content="Hugo 0.86.0" />
  
  
  
  
  
  
  <title>Web Components 🌟 梨花细雨不见鹿2</title>

  <meta property="og:title" content="Web Components" />
<meta property="og:description" content="众所周知，开发复杂软件的原则是：不要让软件复杂 如果某个部分变得复杂了 —— 将其拆分成更简单的部分，再以最简明的方式组合起来。 只有让复杂的事情简" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://note.strawbreey.com/posts/202010142145/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-14T21:45:06+08:00" />
<meta property="article:modified_time" content="2020-10-14T21:45:06+08:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Web Components"/>
<meta name="twitter:description" content="众所周知，开发复杂软件的原则是：不要让软件复杂 如果某个部分变得复杂了 —— 将其拆分成更简单的部分，再以最简明的方式组合起来。 只有让复杂的事情简"/>


  <link href="https://note.strawbreey.com/css/index.css" rel="stylesheet">    

  <script src="https://note.strawbreey.com/js/main.js" ></script>
  
  </head><body><header class="header-container layout-block layout-padding">
  <div class="header-inner content-padding-large soft-size--large soft-style--box">
    <div class="header-logo">
      <a href="https://note.strawbreey.com"><h1>梨花细雨不见鹿2</h1></a>
    </div>
    <nav class="header-nav">
      <div class="header-nav--btn">
        <div class="btn-item"></div>
        <div class="btn-item"></div>
        <div class="btn-item"></div>
      </div>
      <div class="header-nav--list">
        <div>
          
          <a class="list-item soft-size--small soft-style--hover soft-style--active" href="/" title="">HOME</a>
          
          <a class="list-item soft-size--small soft-style--hover soft-style--active" href="/posts" title="">POSTS</a>
          
          <a class="list-item soft-size--small soft-style--hover soft-style--active" href="/message" title="">MESSAGE</a>
          
          <a class="list-item soft-size--small soft-style--hover soft-style--active" href="/link" title="">LINK</a>
          
        </div>
      </div>
    </nav>
  </div>
</header><main id="content">
    

    <div class="single-container layout-block">
      <div class="article-info">
        <div class="article-header layout-padding">
          <div class="article-cover card-container content-padding-large soft-size--large soft-style--box img ">

  <div class="card-cover">
    
      <img src="https://note.strawbreey.com/cover/1.jpg" alt="/cover/1.jpg" />
    
  </div>

  <div class="card-text">
    <h1 class="card-text--title">Web Components</h1>
    
      <p class="card-text--row">2020-10-14 21:45</p>
      
      
      

      
      
    
  </div>

</div>
        </div>

        <div class="article-content">
          <div class="markdown-body content-padding-large soft-size--large soft-style--box">
            <p>众所周知，开发复杂软件的原则是：不要让软件复杂</p>
<p>如果某个部分变得复杂了 —— 将其拆分成更简单的部分，再以最简明的方式组合起来。</p>
<p>只有让复杂的事情简单化的架构才是好架构。</p>
<p>一个组件有：</p>
<p>自己的 JavaScript 类。
DOM 结构，并且只由自己的类管理，无法被外部代码操作。（「封装」原则）。
CSS 样式，作用在这个组件上。
API：事件，类方法等等，让组件可以与其他组件交互。</p>
<p>Custom elements —— 用于自定义 HTML 元素.
Shadow DOM —— 为组件创建内部 DOM，它对外部是不可见的。
CSS Scoping —— 申明仅应用于组件的 Shadow DOM 内的样式。
Event retargeting 以及更多的小东西，让自定义组件更适用于开发工作。</p>
<h3 id="custom-elements-自定义标签">Custom elements (自定义标签)</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyElement</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">HTMLElement</span> {
  <span style="color:#a6e22e">constructor</span>() {
    <span style="color:#66d9ef">super</span>();
    <span style="color:#75715e">// 元素在这里创建
</span><span style="color:#75715e"></span>  }

  <span style="color:#a6e22e">connectedCallback</span>() {
    <span style="color:#75715e">// 在元素被添加到文档之后，浏览器会调用这个方法
</span><span style="color:#75715e"></span>    <span style="color:#75715e">//（如果一个元素被反复添加到文档／移除文档，那么这个方法会被多次调用）
</span><span style="color:#75715e"></span>  }

  <span style="color:#a6e22e">disconnectedCallback</span>() {
    <span style="color:#75715e">// 在元素从文档移除到时候，浏览器会调用这个方法
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// （如果一个元素被反复添加到文档／移除文档，那么这个方法会被多次调用）
</span><span style="color:#75715e"></span>  }

  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">get</span> <span style="color:#a6e22e">observedAttributes</span>() {
    <span style="color:#66d9ef">return</span> [<span style="color:#75715e">/* 属性数组，这些属性的变化会被被监视 */</span>];
  }

  <span style="color:#a6e22e">attributeChangedCallback</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">oldValue</span>, <span style="color:#a6e22e">newValue</span>) {
    <span style="color:#75715e">// 当上面数组里面的属性变化的时候，这个方法会被调用
</span><span style="color:#75715e"></span>  }

  <span style="color:#a6e22e">adoptedCallback</span>() {
    <span style="color:#75715e">// 在元素被移动到新的文档的时候，这个方法会被调用
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// （document.adoptNode 会用到, 非常少见）
</span><span style="color:#75715e"></span>  }

  <span style="color:#75715e">// 还可以添加更多的元素方法和属性
</span><span style="color:#75715e"></span>}
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// 让浏览器知道我们新定义的类是为 &lt;my-element&gt; 服务的
</span><span style="color:#75715e"></span><span style="color:#a6e22e">customElements</span>.<span style="color:#a6e22e">define</span>(<span style="color:#e6db74">&#34;my-element&#34;</span>, <span style="color:#a6e22e">MyElement</span>);
</code></pre></div><pre><code>Custom element 名称必须包括一个短横线 -
Custom element 名称必须包括一个短横线 -, 比如 my-element 和 super-button 都是有效的元素名，但 myelement 并不是。

这是为了确保 custom element 和内置 HTML 元素之间不会发生命名冲突。
</code></pre>
<p>创建一个自定义时间标签</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TimeFormatted</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">HTMLElement</span> { 
  <span style="color:#75715e">// 在元素被添加到文档之后，浏览器会调用这个方法 =&gt; 相当于生命周期的mount
</span><span style="color:#75715e"></span>
  <span style="color:#a6e22e">connectedCallback</span>() {
    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">date</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Date(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;datetime&#39;</span>) <span style="color:#f92672">||</span> Date.<span style="color:#a6e22e">now</span>());

    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">innerHTML</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Intl</span>.<span style="color:#a6e22e">DateTimeFormat</span>(<span style="color:#e6db74">&#34;default&#34;</span>, {
      <span style="color:#a6e22e">year</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;year&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
      <span style="color:#a6e22e">month</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;month&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
      <span style="color:#a6e22e">day</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;day&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
      <span style="color:#a6e22e">hour</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;hour&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
      <span style="color:#a6e22e">minute</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;minute&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
      <span style="color:#a6e22e">second</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;second&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
      <span style="color:#a6e22e">timeZoneName</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;time-zone-name&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
    }).<span style="color:#a6e22e">format</span>(<span style="color:#a6e22e">date</span>);
  }

}

<span style="color:#a6e22e">customElements</span>.<span style="color:#a6e22e">define</span>(<span style="color:#e6db74">&#34;time-formatted&#34;</span>, <span style="color:#a6e22e">TimeFormatted</span>);
&lt;/<span style="color:#f92672">script</span>&gt;

<span style="color:#75715e">&lt;!-- (3) --&gt;</span>
&lt;<span style="color:#f92672">time-formatted</span> 
    <span style="color:#a6e22e">datetime</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;2019-12-01&#34;</span>
    <span style="color:#a6e22e">year</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;numeric&#34;</span> 
    <span style="color:#a6e22e">month</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;long&#34;</span> 
    <span style="color:#a6e22e">day</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;numeric&#34;</span>
    <span style="color:#a6e22e">hour</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;numeric&#34;</span> 
    <span style="color:#a6e22e">minute</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;numeric&#34;</span> 
    <span style="color:#a6e22e">second</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;numeric&#34;</span>
    <span style="color:#a6e22e">time-zone-name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;short&#34;</span>
&gt;&lt;/<span style="color:#f92672">time-formatted</span>&gt;

</code></pre></div><p>在 connectedCallback 中渲染，而不是 constructor 中
在上面的例子中，元素里面的内容是在 connectedCallback 中渲染（创建）的。</p>
<p>为什么不在 constructor 中渲染？</p>
<p>原因很简单：在 constructor 被调用的时候，还为时过早。虽然这个元素实例已经被创建了，但还没有插入页面。在这个阶段，浏览器还没有处理／创建元素属性：调用 getAttribute 将会得到 null。所以我们并不能在那里渲染元素。</p>
<p>而且，如果你仔细考虑，这样作对于性能更好 —— 推迟渲染直到真正需要的时候。</p>
<p>在元素被添加到文档的时候，它的 connectedCallback 方法会被调用。这个元素不仅仅是被添加为了另一个元素的子元素，同样也成为了页面的一部分。因此我们可以构建分离的 DOM，创建元素并且让它们为之后的使用准备好。它们只有在插入页面的时候才会真的被渲染。</p>
<h3 id="监视属性">监视属性</h3>
<p>我们目前的 <!-- raw HTML omitted --> 实现中，在元素渲染以后，后续的属性变化并不会带来任何影响。这对于 HTML 元素来说有点奇怪。通常当我们改变一个属性的时候，比如 a.href，我们会预期立即看到变化。我们将会在下面修正这一点。</p>
<p>为了监视这些属性，我们可以在 observedAttributes() static getter 中提供属性列表。当这些属性发生变化的时候，attributeChangedCallback 会被调用。出于性能优化的考虑，其他属性变化的时候并不会触发这个回调方法。</p>
<p>以下是 <!-- raw HTML omitted --> 的新版本，它会在属性变化的时候自动更新：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">
&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TimeFormatted</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">HTMLElement</span> {

  <span style="color:#a6e22e">render</span>() { <span style="color:#75715e">// (1)
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">date</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Date(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;datetime&#39;</span>) <span style="color:#f92672">||</span> Date.<span style="color:#a6e22e">now</span>());

    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">innerHTML</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Intl</span>.<span style="color:#a6e22e">DateTimeFormat</span>(<span style="color:#e6db74">&#34;default&#34;</span>, {
      <span style="color:#a6e22e">year</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;year&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
      <span style="color:#a6e22e">month</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;month&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
      <span style="color:#a6e22e">day</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;day&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
      <span style="color:#a6e22e">hour</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;hour&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
      <span style="color:#a6e22e">minute</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;minute&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
      <span style="color:#a6e22e">second</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;second&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
      <span style="color:#a6e22e">timeZoneName</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getAttribute</span>(<span style="color:#e6db74">&#39;time-zone-name&#39;</span>) <span style="color:#f92672">||</span> <span style="color:#66d9ef">undefined</span>,
    }).<span style="color:#a6e22e">format</span>(<span style="color:#a6e22e">date</span>);
  }

  <span style="color:#a6e22e">connectedCallback</span>() { <span style="color:#75715e">// (2)
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">rendered</span>) {
      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">render</span>();
      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">rendered</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
    }
  }

    <span style="color:#75715e">// 设置监听属性
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">get</span> <span style="color:#a6e22e">observedAttributes</span>() { <span style="color:#75715e">// (3)
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> [<span style="color:#e6db74">&#39;datetime&#39;</span>, <span style="color:#e6db74">&#39;year&#39;</span>, <span style="color:#e6db74">&#39;month&#39;</span>, <span style="color:#e6db74">&#39;day&#39;</span>, <span style="color:#e6db74">&#39;hour&#39;</span>, <span style="color:#e6db74">&#39;minute&#39;</span>, <span style="color:#e6db74">&#39;second&#39;</span>, <span style="color:#e6db74">&#39;time-zone-name&#39;</span>];
  }

  <span style="color:#a6e22e">attributeChangedCallback</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">oldValue</span>, <span style="color:#a6e22e">newValue</span>) { <span style="color:#75715e">// (4)
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">render</span>();
  }

}

<span style="color:#a6e22e">customElements</span>.<span style="color:#a6e22e">define</span>(<span style="color:#e6db74">&#34;time-formatted&#34;</span>, <span style="color:#a6e22e">TimeFormatted</span>);
&lt;/<span style="color:#f92672">script</span>&gt;

&lt;<span style="color:#f92672">time-formatted</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;elem&#34;</span> <span style="color:#a6e22e">hour</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;numeric&#34;</span> <span style="color:#a6e22e">minute</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;numeric&#34;</span> <span style="color:#a6e22e">second</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;numeric&#34;</span>&gt;&lt;/<span style="color:#f92672">time-formatted</span>&gt;

&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#a6e22e">setInterval</span>(() =&gt; <span style="color:#a6e22e">elem</span>.<span style="color:#a6e22e">setAttribute</span>(<span style="color:#e6db74">&#39;datetime&#39;</span>, <span style="color:#66d9ef">new</span> Date()), <span style="color:#ae81ff">1000</span>); <span style="color:#75715e">// (5)
</span><span style="color:#75715e"></span>&lt;/<span style="color:#f92672">script</span>&gt;
</code></pre></div><p>渲染逻辑被移动到了 render() 这个辅助方法里面。
这个方法在元素被插入到页面的时候调用。
attributeChangedCallback 在 observedAttributes() 里的属性改变的时候被调用。
…… 然后重渲染元素。
最终，一个计时器就这样被我们轻松地实现了。</p>
<h3 id="渲染顺序">渲染顺序</h3>
<p>在 HTML 解析器构建 DOM 的时候，会按照先后顺序处理元素，先处理父级元素再处理子元素。例如，如果我们有 <!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted --><!-- raw HTML omitted -->，那么 <!-- raw HTML omitted --> 元素会首先被创建并接入到 DOM，然后才是 <!-- raw HTML omitted -->。</p>
<p>这对 custom elements 产生了重要影响。</p>
<p>比如，如果一个 custom element 想要在 connectedCallback 内访问 innerHTML，它什么也拿不到:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#a6e22e">customElements</span>.<span style="color:#a6e22e">define</span>(<span style="color:#e6db74">&#39;user-info&#39;</span>, <span style="color:#66d9ef">class</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">HTMLElement</span> {
  <span style="color:#a6e22e">connectedCallback</span>() {
    <span style="color:#a6e22e">alert</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">innerHTML</span>); <span style="color:#75715e">// empty (*)
</span><span style="color:#75715e"></span>  }
});
&lt;/<span style="color:#f92672">script</span>&gt;

&lt;<span style="color:#f92672">user-info</span>&gt;John&lt;/<span style="color:#f92672">user-info</span>&gt;
</code></pre></div><p>如果我们要给 custom element 传入信息，我们可以使用元素属性。它们是即时生效的。</p>
<p>或者，如果我们需要子元素，我们可以使用延迟时间为零的 setTimeout 来推迟访问子元素。</p>
<p>这样是可行的：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#a6e22e">customElements</span>.<span style="color:#a6e22e">define</span>(<span style="color:#e6db74">&#39;user-info&#39;</span>, <span style="color:#66d9ef">class</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">HTMLElement</span> {

  <span style="color:#a6e22e">connectedCallback</span>() {
    <span style="color:#a6e22e">setTimeout</span>(() =&gt; <span style="color:#a6e22e">alert</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">innerHTML</span>)); <span style="color:#75715e">// John (*)
</span><span style="color:#75715e"></span>  }

});
&lt;/<span style="color:#f92672">script</span>&gt;

&lt;<span style="color:#f92672">user-info</span>&gt;John&lt;/<span style="color:#f92672">user-info</span>&gt;
</code></pre></div><p>让我们用一个例子来说明：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#a6e22e">customElements</span>.<span style="color:#a6e22e">define</span>(<span style="color:#e6db74">&#39;user-info&#39;</span>, <span style="color:#66d9ef">class</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">HTMLElement</span> {
  <span style="color:#a6e22e">connectedCallback</span>() {
    <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">id</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> 已连接。`</span>);
    <span style="color:#a6e22e">setTimeout</span>(() =&gt; <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">${</span><span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">id</span><span style="color:#e6db74">}</span><span style="color:#e6db74"> 初始化完成。`</span>));
  }
});
&lt;/<span style="color:#f92672">script</span>&gt;

&lt;<span style="color:#f92672">user-info</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;outer&#34;</span>&gt;
  &lt;<span style="color:#f92672">user-info</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;inner&#34;</span>&gt;&lt;/<span style="color:#f92672">user-info</span>&gt;
&lt;/<span style="color:#f92672">user-info</span>&gt;
</code></pre></div><p>输出顺序：</p>
<p>outer 已连接。
inner 已连接。
outer 初始化完成。
inner 初始化完成。</p>
<h3 id="seo">SEO</h3>
<p>我们创建的 <!-- raw HTML omitted --> 这些新元素，并没有任何相关的语义。搜索引擎并不知晓它们的存在，同时无障碍设备也无法处理它们。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#75715e">// 这个按钮在被点击的时候说 &#34;hello&#34;
</span><span style="color:#75715e"></span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">HelloButton</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">HTMLButtonElement</span> {
  <span style="color:#a6e22e">constructor</span>() {
    <span style="color:#66d9ef">super</span>();
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#39;click&#39;</span>, () =&gt; <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;Hello!&#34;</span>));
  }
}

<span style="color:#a6e22e">customElements</span>.<span style="color:#a6e22e">define</span>(<span style="color:#e6db74">&#39;hello-button&#39;</span>, <span style="color:#a6e22e">HelloButton</span>, {<span style="color:#66d9ef">extends</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;button&#39;</span>});
&lt;/<span style="color:#f92672">script</span>&gt;

&lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">is</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hello-button&#34;</span>&gt;Click me&lt;/<span style="color:#f92672">button</span>&gt;

&lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">is</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;hello-button&#34;</span> <span style="color:#a6e22e">disabled</span>&gt;Disabled&lt;/<span style="color:#f92672">button</span>&gt;
</code></pre></div><h3 id="总结">总结</h3>
<p>有两种 custom element</p>
<p>“Autonomous” —— 全新的标签，继承 HTMLElement。</p>
<p>定义方式：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyElement</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">HTMLElement</span> {
  <span style="color:#a6e22e">constructor</span>() { <span style="color:#66d9ef">super</span>(); <span style="color:#75715e">/* ... */</span> }
  <span style="color:#a6e22e">connectedCallback</span>() { <span style="color:#75715e">/* ... */</span> }
  <span style="color:#a6e22e">disconnectedCallback</span>() { <span style="color:#75715e">/* ... */</span>  }
  <span style="color:#66d9ef">static</span> <span style="color:#a6e22e">get</span> <span style="color:#a6e22e">observedAttributes</span>() { <span style="color:#66d9ef">return</span> [<span style="color:#75715e">/* ... */</span>]; }
  <span style="color:#a6e22e">attributeChangedCallback</span>(<span style="color:#a6e22e">name</span>, <span style="color:#a6e22e">oldValue</span>, <span style="color:#a6e22e">newValue</span>) { <span style="color:#75715e">/* ... */</span> }
  <span style="color:#a6e22e">adoptedCallback</span>() { <span style="color:#75715e">/* ... */</span> }
 }
<span style="color:#a6e22e">customElements</span>.<span style="color:#a6e22e">define</span>(<span style="color:#e6db74">&#39;my-element&#39;</span>, <span style="color:#a6e22e">MyElement</span>);
<span style="color:#75715e">/* &lt;my-element&gt; */</span>

</code></pre></div><p>“Customized built-in elements” —— 已有元素的扩展。</p>
<p>需要多一个 .define 参数，同时 is=&quot;&hellip;&quot; 在 HTML 中：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyButton</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">HTMLButtonElement</span> { <span style="color:#75715e">/*...*/</span> }
<span style="color:#a6e22e">customElements</span>.<span style="color:#a6e22e">define</span>(<span style="color:#e6db74">&#39;my-button&#39;</span>, <span style="color:#a6e22e">MyElement</span>, {<span style="color:#66d9ef">extends</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;button&#39;</span>});
<span style="color:#75715e">/* &lt;button is=&#34;my-button&#34;&gt; */</span>
</code></pre></div><p>请注意：</p>
<p>在元素被从文档移除的时候，我们会清除 setInterval 的 timer。这非常重要，否则即使我们不再需要它了，它仍然会继续计时。这样浏览器就不能清除这个元素占用和被这个元素引用的内存了。
我们可以通过 elem.date 属性得到当前时间。类所有的方法和属性天生就是元素的方法和属性。</p>
<h2 id="shadow-dom">Shadow DOM</h2>
<p>Shadow DOM 为封装而生。它可以让一个组件拥有自己的「影子」DOM 树，这个 DOM 树不能在主文档中被任意访问，可能拥有局部样式规则，还有其他特性。</p>
<p>内建 shadow DOM</p>
<p>浏览器在内部使用 DOM/CSS 来绘制它们。这个 DOM 结构一般来说对我们是隐藏的，但我们可以在开发者工具里面看见它。比如，在 Chrome 里，我们需要打开「Show user agent shadow DOM」选项。</p>
<p>然后 <!-- raw HTML omitted --> 看起来会像这样：</p>
<p>你在 #shadow-root 下看到的就是被称为「shadow DOM」的东西。</p>
<p>我们不能使用一般的 JavaScript 调用或者选择器来获取内建 shadow DOM 元素。它们不是常规的子元素，而是一个强大的封装手段。</p>
<p>在上面的例子中，我们可以看到一个有用的属性 pseudo。这是一个因为历史原因而存在的属性，并不在标准中。我们可以使用它来给子元素加上 CSS 样式，像这样：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">style</span>&gt;
<span style="color:#75715e">/* 让滑块轨道变红 */</span>
<span style="color:#f92672">input</span>::<span style="color:#a6e22e">-webkit-slider-runnable-track</span> {
  <span style="color:#66d9ef">background</span>: <span style="color:#66d9ef">red</span>;
}
&lt;/<span style="color:#f92672">style</span>&gt;

&lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;range&#34;</span>&gt;
</code></pre></div><h3 id="shadow-tree">Shadow tree</h3>
<p>一个 DOM 元素可以有以下两类 DOM 子树：</p>
<p>Light tree（光明树） —— 一个常规 DOM 子树，由 HTML 子元素组成。我们在之前章节看到的所有子树都是「光明的」。
Shadow tree（影子树） —— 一个隐藏的 DOM 子树，不在 HTML 中反映，无法被察觉。</p>
<h3 id="封装">封装</h3>
<p>Shadow DOM 被非常明显地和主文档分开：</p>
<p>Shadow DOM 元素对于 light DOM 中的 querySelector 不可见。实际上，Shadow DOM 中的元素可能与 light DOM 中某些元素的 id 冲突。这些元素必须在 shadow tree 中独一无二。
Shadow DOM 有自己的样式。外部样式规则在 shadow DOM 中不产生作用。</p>
<h3 id="总结-1">总结</h3>
<p>Shadow DOM 是创建组件级别 DOM 的一种方法。</p>
<p>shadowRoot = elem.attachShadow({mode: open|closed}) —— 为 elem 创建 shadow DOM。如果 mode=&ldquo;open&rdquo;，那么它通过 elem.shadowRoot 属性被访问。
我们可以使用 innerHTML 或者其他 DOM 方法来扩展 shadowRoot。
Shadow DOM 元素：</p>
<p>有自己的 id 空间。
对主文档的 JavaScript 选择器隐身，比如 querySelector。
只使用 shadow tree 内部的样式，不使用主文档的样式。
Shadow DOM，如果存在的话，会被浏览器渲染而不是所谓的 「light DOM」（普通子元素）。在 Shadow DOM 插槽，组成 章节中我们将会看到如何组织它们。</p>
<h2 id="模板元素">模板元素</h2>
<p>内建的 <!-- raw HTML omitted --> 元素用来存储 HTML 模板。浏览器将忽略它的内容，仅检查语法的有效性，但是我们可以在 JavaScript 中访问和使用它来创建其他元素。</p>
<p>从理论上讲，我们可以在 HTML 中的任何位置创建不可见元素来储存 HTML 模板。那 <!-- raw HTML omitted --> 元素有什么优势？</p>
<p>首先，其内容可以是任何有效的HTML，即使它通常需要特定的封闭标签。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">template</span>&gt;
  &lt;<span style="color:#f92672">tr</span>&gt;
    &lt;<span style="color:#f92672">td</span>&gt;Contents&lt;/<span style="color:#f92672">td</span>&gt;
  &lt;/<span style="color:#f92672">tr</span>&gt;
&lt;/<span style="color:#f92672">template</span>&gt;

</code></pre></div><h3 id="总结-2">总结</h3>
<p><!-- raw HTML omitted --> 的内容可以是任何语法正确的 HTML。
<!-- raw HTML omitted --> 内容被视为“超出文档范围”，因此它不会产生任何影响。
我们可以在JavaScript 中访问 template.content ，将其克隆以在新组件中重复使用。
<!-- raw HTML omitted --> 标签非常独特，因为：
浏览器将检查其中的HTML语法（与在脚本中使用模板字符串不同）。
但允许使用任何顶级 HTML 标签，即使没有适当包装元素的无意义的元素（例如 <!-- raw HTML omitted --> ）。
其内容是交互式的：插入其文档后，脚本会运行， <!-- raw HTML omitted --> 会自动播放。
<!-- raw HTML omitted --> 元素不具有任何迭代机制，数据绑定或变量替换的功能，但我们可以在其基础上实现这些功能。</p>

          </div>
        </div>
                 
      
  
  
  
  

  

  <div class="article-paging">
    
      <section class="post-paging--item card-container content-padding-primary soft-size--primary soft-style--box">
  <div class="card-cover" ></div>
  <div class="card-text">
    <a href="/posts/202010142236/"><h4 class="card-text--title text-ellipsis">Web Data Storage</h4></a>
    <p class="card-text--row">2020-10-14 22:36</p>
  </div>
</section>
    
    
      <section class="post-paging--item card-container content-padding-primary soft-size--primary soft-style--box">
  <div class="card-cover" ></div>
  <div class="card-text">
    <a href="/posts/202010132328/"><h4 class="card-text--title text-ellipsis">Good Doctor 1 3</h4></a>
    <p class="card-text--row">2020-10-13 23:28</p>
  </div>
</section>
    
  </div>
</div>
  <aside class="widget-info">
    
<section class="aside-widget widget-author content-padding-large soft-size--large soft-style--box">
  <div class="widget-body">
    <div class="author-box avatar">
      
      <img class="author-avatar soft-size--round soft-style--box" src="https://s.gravatar.com/avatar/7b5a0b07a98895278cfa862b1f32ae8f?s=200&amp;r=g&amp;d=retro" alt="Sukoshi">
      
      <h2 class="author-name text-ellipsis">Sukoshi</h2>
      
      <p class="author-desc text-ellipsis">梅花鹿的角叫鹿角</p>
      
    </div>
  </div>
</section>


    


    










<section class="aside-widget widget-articles content-padding-large soft-size--large soft-style--box">
  <h2 class="widget-header">
    <div class="title">
      <span>Related Posts</span>
    </div>
  </h2>
  <div class="widget-body">
    <ul class="post-list">
      
      
        <li class="post-item"><a href="/posts/202107261428/">Gin Start</a></li>
      
        <li class="post-item"><a href="/posts/202108051754/">Git Worktree Prune</a></li>
      
        <li class="post-item"><a href="/posts/202108051727/">Go Tour</a></li>
      
        <li class="post-item"><a href="/posts/202108051717/">Redis Single So Fast</a></li>
      
        <li class="post-item"><a href="/posts/202108051617/">Php Rand</a></li>
      
        <li class="post-item"><a href="/posts/202108051521/">Go Select</a></li>
      
    </ul>
  </div>
</section>


    




<section class="aside-widget widget-categories content-padding-large soft-size--large soft-style--box">
  <h2 class="widget-header">
    <div class="title">
      <span>Categories</span>
    </div>
  </h2>
  <div class="widget-body">
    <ul class="categories-list">
      
        <li>
          <a href="https://note.strawbreey.com/categories/go/">GO</a>
          <span>2</span>
        </li>
      
    </ul>
  </div>

  
</section>


    




<section class="aside-widget widget-tags content-padding-large soft-size--large soft-style--box">
  <h2 class="widget-header">
    <div class="title">
      <span>Tags</span>
    </div>
  </h2>
  <div class="widget-body">
    <div class="tags-list">
      
        <a href="https://note.strawbreey.com/tags/php/" data-count="23" class="soft-size--small soft-style--hover soft-style--active">php</a>
      
        <a href="https://note.strawbreey.com/tags/leetcode/" data-count="14" class="soft-size--small soft-style--hover soft-style--active">leetcode</a>
      
        <a href="https://note.strawbreey.com/tags/vscode/" data-count="3" class="soft-size--small soft-style--hover soft-style--active">vscode</a>
      
        <a href="https://note.strawbreey.com/tags/git/" data-count="2" class="soft-size--small soft-style--hover soft-style--active">git</a>
      
        <a href="https://note.strawbreey.com/tags/mysql/" data-count="2" class="soft-size--small soft-style--hover soft-style--active">mysql</a>
      
        <a href="https://note.strawbreey.com/tags/webapi/" data-count="2" class="soft-size--small soft-style--hover soft-style--active">webApi</a>
      
        <a href="https://note.strawbreey.com/tags/angular/" data-count="1" class="soft-size--small soft-style--hover soft-style--active">angular</a>
      
        <a href="https://note.strawbreey.com/tags/devops/" data-count="1" class="soft-size--small soft-style--hover soft-style--active">devops</a>
      
        <a href="https://note.strawbreey.com/tags/go/" data-count="1" class="soft-size--small soft-style--hover soft-style--active">GO</a>
      
        <a href="https://note.strawbreey.com/tags/interview/" data-count="1" class="soft-size--small soft-style--hover soft-style--active">interview</a>
      
        <a href="https://note.strawbreey.com/tags/toggle/" data-count="1" class="soft-size--small soft-style--hover soft-style--active">toggle</a>
      
    </div>
  </div>

  
</section>

  </aside>
</div>
  </main><footer class="footer-container layout-block">
  
  <div class="social-icons">
    
      <a class="soft-size--primary soft-style--box" href="https://github.com/miiiku" target="_blank" rel="noopener noreferrer">
          
        <svg class="icon icon-github" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
          <path d="M64.6 512c0 195.6 125.4 361.9 300.1 422.9 23.5 5.9 19.9-10.8 19.9-22.2v-77.6c-135.8 15.9-141.3-74-150.5-89-18.5-31.5-61.9-39.5-49-54.5 31-15.9 62.5 4 98.9 58 26.4 39.1 77.9 32.5 104.1 26 5.7-23.5 17.9-44.5 34.7-60.9-140.7-25.2-199.4-111.1-199.4-213.3 0-49.5 16.4-95.1 48.4-131.8-20.4-60.6 1.9-112.4 4.9-120.1 58.2-5.2 118.5 41.6 123.3 45.3 33.1-8.9 70.8-13.7 112.9-13.7 42.4 0 80.3 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.4-43.9 2.9 7.7 24.7 58.3 5.5 118.1 32.5 36.8 49 82.8 49 132.4 0 102.3-59 188.3-200.2 213.2 23.5 23.3 38.1 55.5 38.1 91.1v112.7c0.8 9 0 17.9 15.1 17.9C832.7 877 960.4 709.4 960.4 512.1c0-247.5-200.6-447.9-447.9-447.9C265 64.1 64.6 264.5 64.6 512z"></path>
        </svg>
        

        

        

        

        
      </a>
    
      <a class="soft-size--primary soft-style--box" href="https://twitter.com/guanquanhong" target="_blank" rel="noopener noreferrer">
        

          
        <svg class="icon icon-twitter" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
          <path d="M962.285714 233.142857q-38.285714 56-92.571429 95.428571 0.571429 8 0.571429 24 0 74.285714-21.714286 148.285714t-66 142-105.428571 120.285714-147.428571 83.428571-184.571429 31.142857q-154.857143 0-283.428571-82.857143 20 2.285714 44.571429 2.285714 128.571429 0 229.142857-78.857143-60-1.142857-107.428571-36.857143t-65.142857-91.142857q18.857143 2.857143 34.857143 2.857143 24.571429 0 48.571429-6.285714-64-13.142857-106-63.714286t-42-117.428571l0-2.285714q38.857143 21.714286 83.428571 23.428571-37.714286-25.142857-60-65.714286t-22.285714-88q0-50.285714 25.142857-93.142857 69.142857 85.142857 168.285714 136.285714t212.285714 56.857143q-4.571429-21.714286-4.571429-42.285714 0-76.571429 54-130.571429t130.571429-54q80 0 134.857143 58.285714 62.285714-12 117.142857-44.571429-21.142857 65.714286-81.142857 101.714286 53.142857-5.714286 106.285714-28.571429z"></path>
        </svg>
        

        

        

        
      </a>
    
      <a class="soft-size--primary soft-style--box" href="https://www.instagram.com/sukoshi_dayo/" target="_blank" rel="noopener noreferrer">
        

        

          
        <svg class="icon icon-instagram" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
          <path d="M512 0C372.906667 0 355.541333 0.64 300.928 3.072 246.4 5.632 209.28 14.208 176.64 26.88c-33.664 13.056-62.250667 30.592-90.709333 59.050667S39.893333 142.933333 26.88 176.64C14.208 209.28 5.589333 246.4 3.072 300.928 0.512 355.541333 0 372.906667 0 512s0.64 156.458667 3.072 211.072c2.56 54.485333 11.136 91.648 23.808 124.288a251.093333 251.093333 0 0 0 59.050667 90.709333A250.368 250.368 0 0 0 176.64 997.12c32.682667 12.629333 69.802667 21.290667 124.288 23.808C355.541333 1023.488 372.906667 1024 512 1024s156.458667-0.64 211.072-3.072c54.485333-2.56 91.648-11.178667 124.288-23.808a251.648 251.648 0 0 0 90.709333-59.050667 250.026667 250.026667 0 0 0 59.050667-90.709333c12.629333-32.64 21.290667-69.802667 23.808-124.288 2.56-54.613333 3.072-71.978667 3.072-211.072s-0.64-156.458667-3.072-211.072c-2.56-54.485333-11.178667-91.690667-23.808-124.288a251.306667 251.306667 0 0 0-59.050667-90.709333A249.472 249.472 0 0 0 847.36 26.88c-32.64-12.672-69.802667-21.290667-124.288-23.808C668.458667 0.512 651.093333 0 512 0z m0 92.16c136.661333 0 152.96 0.682667 206.933333 3.029333 49.92 2.346667 77.013333 10.624 95.018667 17.706667 23.978667 9.258667 40.96 20.352 58.965333 38.229333 17.877333 17.92 28.970667 34.944 38.229334 58.922667 6.997333 18.005333 15.36 45.098667 17.621333 95.018667 2.432 54.016 2.986667 70.229333 2.986667 206.933333s-0.64 152.96-3.157334 206.933333c-2.602667 49.92-10.922667 77.013333-17.962666 95.018667a162.56 162.56 0 0 1-38.357334 58.965333 159.744 159.744 0 0 1-58.88 38.229334c-17.92 6.997333-45.44 15.36-95.36 17.621333-54.357333 2.432-70.357333 2.986667-207.317333 2.986667-137.002667 0-153.002667-0.64-207.317333-3.157334-49.962667-2.602667-77.482667-10.922667-95.402667-17.962666a158.549333 158.549333 0 0 1-58.837333-38.357334 155.477333 155.477333 0 0 1-38.4-58.88c-7.04-17.92-15.317333-45.44-17.92-95.36-1.92-53.76-2.602667-70.357333-2.602667-206.677333 0-136.362667 0.682667-153.002667 2.602667-207.402667 2.602667-49.92 10.88-77.397333 17.92-95.317333 8.96-24.32 20.437333-40.96 38.4-58.922667 17.877333-17.877333 34.56-29.397333 58.837333-38.314666 17.92-7.082667 44.842667-15.402667 94.762667-17.962667 54.4-1.92 70.4-2.56 207.317333-2.56l1.92 1.28z m0 156.928a262.912 262.912 0 1 0 0 525.824 262.912 262.912 0 1 0 0-525.824zM512 682.666667c-94.293333 0-170.666667-76.373333-170.666667-170.666667s76.373333-170.666667 170.666667-170.666667 170.666667 76.373333 170.666667 170.666667-76.373333 170.666667-170.666667 170.666667z m334.762667-443.946667a61.482667 61.482667 0 0 1-122.88 0 61.44 61.44 0 0 1 122.88 0z"></path>
        </svg>
        

        

        
      </a>
    
      <a class="soft-size--primary soft-style--box" href="https://weibo.com/u/5561168966" target="_blank" rel="noopener noreferrer">
        

        

        

          
        <svg class="icon icon-weibo" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
          <path d="M385.682429 733.696q11.995429-19.456 6.290286-39.424t-25.746286-28.598857q-19.456-7.972571-41.691429-0.585143t-34.304 26.258286q-12.580571 19.456-7.460571 39.131429t24.576 28.891429 42.569143 1.462857 35.693714-27.136zM439.442429 664.576q4.534857-7.460571 1.974857-15.140571t-10.020571-10.605714q-7.972571-2.852571-16.310857 0.292571t-12.288 10.605714q-9.728 17.700571 7.460571 25.746286 7.972571 2.852571 16.603429-0.292571t12.580571-10.605714zM538.843572 725.723429q-25.746286 58.294857-90.258286 85.723429t-128 6.875429q-61.147429-19.456-84.260571-72.265143t3.730286-107.154286q26.843429-53.174857 86.601143-79.433143t120.32-10.825143q63.414857 16.603429 90.550857 68.315429t1.462857 108.836571zM717.165858 634.294857q-5.12-54.857143-50.834286-97.133714t-119.149714-62.317714-156.891429-11.995429q-127.414857 13.165714-211.163429 80.822857t-75.702857 151.113143q5.12 54.857143 50.834286 97.133714t119.149714 62.317714 156.891429 11.995429q127.414857-13.165714 211.163429-80.822857t75.702857-151.113143zM893.147572 636.562286q0 38.838857-21.138286 79.725714t-62.317714 78.262857-96.256 67.145143-129.170286 47.396571-154.550857 17.700571-157.110857-19.163429-137.435429-53.174857-98.011429-86.308571-37.156571-114.029714q0-65.682286 39.716571-139.995429t112.859429-147.456q96.548571-96.548571 195.145143-134.875429t140.873143 4.022857q37.156571 36.571429 11.410286 119.442286-2.267429 7.972571-0.585143 11.410286t5.705143 4.022857 8.265143-0.292571 7.68-1.974857l3.437714-1.170286q79.433143-33.718857 140.580571-33.718857t87.405714 34.889143q25.746286 35.986286 0 101.741714-1.170286 7.460571-2.56 11.410286t2.56 7.168 6.875429 4.315429 9.728 3.437714q32.548571 10.313143 58.88 26.843429t45.714286 46.592 19.456 66.56zM850.871001 279.990857q23.990857 26.843429 31.158857 62.025143t-3.730286 67.145143q-4.534857 13.165714-16.822857 19.456t-25.453714 2.267429q-13.165714-4.534857-19.456-16.822857t-2.267429-25.453714q11.410286-35.986286-13.677714-63.414857t-61.147429-19.968q-13.677714 2.852571-25.746286-4.534857t-14.262857-21.138286q-2.852571-13.677714 4.534857-25.453714t21.138286-14.555429q34.304-7.460571 68.022857 3.145143t57.709714 37.449143zM954.295001 186.88q49.737143 54.857143 64.292571 127.122286t-7.68 138.020571q-5.12 15.433143-19.456 22.820571t-29.696 2.267429-22.820571-19.456-2.852571-29.696q16.018286-46.884571 5.705143-98.304t-45.714286-90.258286q-35.401143-39.424-84.553143-54.564571t-98.889143-4.827429q-16.018286 3.437714-29.696-5.412571t-17.115429-24.868571 5.412571-29.403429 24.868571-16.822857q70.290286-14.848 139.410286 6.582857t118.857143 76.873143z"></path>
        </svg>
        

        
      </a>
    
      <a class="soft-size--primary soft-style--box" href="https://www.zhihu.com/people/miku-84" target="_blank" rel="noopener noreferrer">
        

        

        

        

          
        <svg class="icon icon-zhihu" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
          <path d="M544.949 561.422s0-71.387-34.779-75.050c-34.779-3.663-142.775 0-142.775 0v-219.654h161.078s-1.83-73.219-32.949-73.219h-261.755l43.93-117.148s-65.897 3.663-89.692 45.761-98.844 252.604-98.844 252.604 25.627 10.983 67.726-20.134c42.101-31.116 56.743-86.033 56.743-86.033l76.879-3.663 1.83 223.316s-133.621-1.83-161.078 0c-27.457 1.83-42.101 75.050-42.101 75.050h203.182s-18.307 124.47-69.557 214.164c-53.085 89.692-151.929 161.078-151.929 161.078s71.387 29.287 140.947-10.983c69.557-42.101 120.811-223.316 120.811-223.316l162.912 203.182s14.643-97.013-1.83-124.47c-18.307-27.457-113.49-137.283-113.49-137.283l-42.101 36.607 29.287-120.811h177.552zM587.050 188.010l-1.83 660.793h65.897l23.795 82.37 115.321-82.37h162.912v-660.793h-366.091zM879.92 775.584h-76.879l-97.013 75.050-21.965-75.050h-20.134v-512.527h215.991v512.527z"></path>
        </svg>
        
      </a>
    
  </div>
  

  <div class="colour-bar"></div>
  
  
  <p>© 2021 <a href="https://github.com/miiiku/hugo-theme-kagome">kagome</a>.</p>
  

  

  <p>
    Powered by
    <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a>
    Theme - 
    <a href="https://github.com/miiiku/hugo-theme-kagome" target="_blank" rel="noopener noreferrer author">kagome</a>
  </p>

  <p>
    <a href="javascript:;" id="theme-light">🌞 light</a>
    <a href="javascript:;" id="theme-dark">🌛 dark</a>
    <a href="javascript:;" id="theme-auto">🤖️ auto</a>
  </p>
</footer>







</body>

</html>