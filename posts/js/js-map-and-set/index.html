<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Js Map and Set - My New Hugo Site</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="olOwOlo" /><meta name="description" content="Map Map 迭代 Object.entries：从对象创建 Map Object.fromEntries：从 Map 创建对象  与其他数据结构互相转化   Set Set 迭代（iteration） 测试题 总结 参考链接  JavaScript 的对象（Object），本质上是键值对的集合（Hash 结构），但是传统上只能用字符串当作键。这给它的使用带来了很大的限制。
为了解决这个问题，ES6 提供了 Map 数据结构。它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键。也就是说，Object 结构提供了“字符串—值”的对应，Map 结构提供了“值—值”的对应，是一种更完善的 Hash 结构实现。如果你需要“键值对”的数据结构，Map 比 Object 更合适。
const data = {}; const element = document.getElementById(&amp;#39;myDiv&amp;#39;); data[element] = &amp;#39;metadata&amp;#39;; data[&amp;#39;[object HTMLDivElement]&amp;#39;] // &amp;#34;metadata&amp;#34;  // or  const m = new Map(); const o = {p: &amp;#39;Hello World&amp;#39;}; m.set(o, &amp;#39;content&amp;#39;) m.get(o) // &amp;#34;content&amp;#34;  m." />






<meta name="generator" content="Hugo 0.86.0-DEV with theme even" />


<link rel="canonical" href="https://example.org/posts/js/js-map-and-set/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.b5a744db6de49a86cadafb3b70f555ab443f83c307a483402259e94726b045ff.css" rel="stylesheet">



<meta property="og:title" content="Js Map and Set" />
<meta property="og:description" content="Map Map 迭代 Object.entries：从对象创建 Map Object.fromEntries：从 Map 创建对象  与其他数据结构互相转化   Set Set 迭代（iteration） 测试题 总结 参考链接  JavaScript 的对象（Object），本质上是键值对的集合（Hash 结构），但是传统上只能用字符串当作键。这给它的使用带来了很大的限制。
为了解决这个问题，ES6 提供了 Map 数据结构。它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键。也就是说，Object 结构提供了“字符串—值”的对应，Map 结构提供了“值—值”的对应，是一种更完善的 Hash 结构实现。如果你需要“键值对”的数据结构，Map 比 Object 更合适。
const data = {}; const element = document.getElementById(&#39;myDiv&#39;); data[element] = &#39;metadata&#39;; data[&#39;[object HTMLDivElement]&#39;] // &#34;metadata&#34;  // or  const m = new Map(); const o = {p: &#39;Hello World&#39;}; m.set(o, &#39;content&#39;) m.get(o) // &#34;content&#34;  m." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.org/posts/js/js-map-and-set/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-23T14:41:10+08:00" />
<meta property="article:modified_time" content="2020-10-23T14:41:10+08:00" />

<meta itemprop="name" content="Js Map and Set">
<meta itemprop="description" content="Map Map 迭代 Object.entries：从对象创建 Map Object.fromEntries：从 Map 创建对象  与其他数据结构互相转化   Set Set 迭代（iteration） 测试题 总结 参考链接  JavaScript 的对象（Object），本质上是键值对的集合（Hash 结构），但是传统上只能用字符串当作键。这给它的使用带来了很大的限制。
为了解决这个问题，ES6 提供了 Map 数据结构。它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键。也就是说，Object 结构提供了“字符串—值”的对应，Map 结构提供了“值—值”的对应，是一种更完善的 Hash 结构实现。如果你需要“键值对”的数据结构，Map 比 Object 更合适。
const data = {}; const element = document.getElementById(&#39;myDiv&#39;); data[element] = &#39;metadata&#39;; data[&#39;[object HTMLDivElement]&#39;] // &#34;metadata&#34;  // or  const m = new Map(); const o = {p: &#39;Hello World&#39;}; m.set(o, &#39;content&#39;) m.get(o) // &#34;content&#34;  m."><meta itemprop="datePublished" content="2020-10-23T14:41:10+08:00" />
<meta itemprop="dateModified" content="2020-10-23T14:41:10+08:00" />
<meta itemprop="wordCount" content="895">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Js Map and Set"/>
<meta name="twitter:description" content="Map Map 迭代 Object.entries：从对象创建 Map Object.fromEntries：从 Map 创建对象  与其他数据结构互相转化   Set Set 迭代（iteration） 测试题 总结 参考链接  JavaScript 的对象（Object），本质上是键值对的集合（Hash 结构），但是传统上只能用字符串当作键。这给它的使用带来了很大的限制。
为了解决这个问题，ES6 提供了 Map 数据结构。它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键。也就是说，Object 结构提供了“字符串—值”的对应，Map 结构提供了“值—值”的对应，是一种更完善的 Hash 结构实现。如果你需要“键值对”的数据结构，Map 比 Object 更合适。
const data = {}; const element = document.getElementById(&#39;myDiv&#39;); data[element] = &#39;metadata&#39;; data[&#39;[object HTMLDivElement]&#39;] // &#34;metadata&#34;  // or  const m = new Map(); const o = {p: &#39;Hello World&#39;}; m.set(o, &#39;content&#39;) m.get(o) // &#34;content&#34;  m."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">My New Hugo Site</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">My New Hugo Site</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
  <div class="post-content">
    <!-- raw HTML omitted -->
<ul>
<li><a href="#map">Map</a></li>
<li><a href="#map-%E8%BF%AD%E4%BB%A3">Map 迭代</a></li>
<li><a href="#objectentries%E4%BB%8E%E5%AF%B9%E8%B1%A1%E5%88%9B%E5%BB%BA-map">Object.entries：从对象创建 Map</a></li>
<li><a href="#objectfromentries%E4%BB%8E-map-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1">Object.fromEntries：从 Map 创建对象</a>
<ul>
<li><a href="#%E4%B8%8E%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%BA%92%E7%9B%B8%E8%BD%AC%E5%8C%96">与其他数据结构互相转化</a></li>
</ul>
</li>
<li><a href="#set">Set</a></li>
<li><a href="#set-%E8%BF%AD%E4%BB%A3iteration">Set 迭代（iteration）</a></li>
<li><a href="#%E6%B5%8B%E8%AF%95%E9%A2%98">测试题</a></li>
<li><a href="#%E6%80%BB%E7%BB%93">总结</a></li>
<li><a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">参考链接</a></li>
</ul>
<!-- raw HTML omitted -->
<p>JavaScript 的对象（Object），本质上是键值对的集合（Hash 结构），但是传统上只能用字符串当作键。这给它的使用带来了很大的限制。</p>
<p>为了解决这个问题，ES6 提供了 Map 数据结构。它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键。也就是说，Object 结构提供了“字符串—值”的对应，Map 结构提供了“值—值”的对应，是一种更完善的 Hash 结构实现。如果你需要“键值对”的数据结构，Map 比 Object 更合适。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> {};
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">element</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;myDiv&#39;</span>);

<span style="color:#a6e22e">data</span>[<span style="color:#a6e22e">element</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;metadata&#39;</span>;
<span style="color:#a6e22e">data</span>[<span style="color:#e6db74">&#39;[object HTMLDivElement]&#39;</span>] <span style="color:#75715e">// &#34;metadata&#34;
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// or
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">m</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">o</span> <span style="color:#f92672">=</span> {<span style="color:#a6e22e">p</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Hello World&#39;</span>};

<span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">o</span>, <span style="color:#e6db74">&#39;content&#39;</span>)
<span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">o</span>) <span style="color:#75715e">// &#34;content&#34;
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">has</span>(<span style="color:#a6e22e">o</span>) <span style="color:#75715e">// true
</span><span style="color:#75715e"></span><span style="color:#a6e22e">m</span>.<span style="color:#66d9ef">delete</span>(<span style="color:#a6e22e">o</span>) <span style="color:#75715e">// true
</span><span style="color:#75715e"></span><span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">has</span>(<span style="color:#a6e22e">o</span>) <span style="color:#75715e">// false
</span></code></pre></div><h3 id="map">Map</h3>
<p>Map 是一个带键的数据项的集合，就像一个 Object 一样。 但是它们最大的差别是 Map 允许任何类型的键（key）</p>
<p>它的方法和属性如下：</p>
<ul>
<li>
<p>map.clear() —— 清空 map</p>
</li>
<li>
<p>map.delete(key) —— 删除指定键的值</p>
</li>
<li>
<p>map.entries() —— 返回一个新的 Iterator 对象，它按插入顺序包含了Map对象中每个元素的 [key, value] 数组。</p>
</li>
<li>
<p>map.forEach() —— 按插入顺序，为 Map对象里的每一键值对调用一次callbackFn函数。如果为forEach提供了thisArg，它将在每次回调中作为this值。</p>
</li>
<li>
<p>map.get(key) —— 根据键来返回值，如果 map 中不存在对应的 key，则返回 undefined。</p>
</li>
<li>
<p>map.has(key) —— 如果 key 存在则返回 true，否则返回 false。</p>
</li>
<li>
<p>map.keys()  —— 返回一个新的 Iterator对象， 它按插入顺序包含了Map对象中每个元素的键 。</p>
</li>
<li>
<p>map.set(key, value) —— 根据键存储值。</p>
</li>
<li>
<p>map.values() —— 返回一个新的Iterator对象，它按插入顺序包含了Map对象中每个元素的值 。</p>
</li>
<li>
<p>new Map() —— 创建 map。</p>
</li>
<li>
<p>map.size —— 返回当前元素个数。</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">map</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();

<span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#39;1&#39;</span>, <span style="color:#e6db74">&#39;str1&#39;</span>);   <span style="color:#75715e">// 字符串键
</span><span style="color:#75715e"></span><span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">set</span>(<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;num1&#39;</span>);     <span style="color:#75715e">// 数字键
</span><span style="color:#75715e"></span><span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">set</span>(<span style="color:#66d9ef">true</span>, <span style="color:#e6db74">&#39;bool1&#39;</span>); <span style="color:#75715e">// 布尔值键
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// 还记得普通的 Object 吗? 它会将键转化为字符串
</span><span style="color:#75715e">// Map 则会保留键的类型，所以下面这两个结果不同：
</span><span style="color:#75715e"></span><span style="color:#a6e22e">alert</span>( <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">get</span>(<span style="color:#ae81ff">1</span>)   ); <span style="color:#75715e">// &#39;num1&#39;
</span><span style="color:#75715e"></span><span style="color:#a6e22e">alert</span>( <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;1&#39;</span>) ); <span style="color:#75715e">// &#39;str1&#39;
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">alert</span>( <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">size</span> ); <span style="color:#75715e">// 3
</span><span style="color:#75715e"></span>
</code></pre></div><p>map[key] 不是使用 Map 的正确方式, 虽然 map[key] 也有效，例如我们可以设置 map[key] = 2，这样会将 map 视为 JavaScript 的 plain object，因此它暗含了所有相应的限制（没有对象键等）。</p>
<p>所以我们应该使用 map 方法：set 和 get 等。</p>
<p>Map 还可以使用对象作为键</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">john</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;John&#34;</span> };

<span style="color:#75715e">// 存储每个用户的来访次数
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">visitsCountMap</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();

<span style="color:#75715e">// john 是 Map 中的键
</span><span style="color:#75715e"></span><span style="color:#a6e22e">visitsCountMap</span>.<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">john</span>, <span style="color:#ae81ff">123</span>);

<span style="color:#a6e22e">alert</span>( <span style="color:#a6e22e">visitsCountMap</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">john</span>) ); <span style="color:#75715e">// 123
</span></code></pre></div><p>使用对象作为键是 Map 最值得注意和重要的功能之一。对于字符串键，Object（普通对象）也能正常使用，但对于对象键则不行。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">john</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;John&#34;</span> };

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">visitsCountObj</span> <span style="color:#f92672">=</span> {}; <span style="color:#75715e">// 尝试使用对象
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">visitsCountObj</span>[<span style="color:#a6e22e">john</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">123</span>; <span style="color:#75715e">// 尝试将 john 对象作为键
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// 是写成了这样!
</span><span style="color:#75715e"></span><span style="color:#a6e22e">alert</span>( <span style="color:#a6e22e">visitsCountObj</span>[<span style="color:#e6db74">&#34;[object Object]&#34;</span>] ); <span style="color:#75715e">// 123
</span></code></pre></div><p>链式调用</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#39;1&#39;</span>, <span style="color:#e6db74">&#39;str1&#39;</span>)
  .<span style="color:#a6e22e">set</span>(<span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#39;num1&#39;</span>)
  .<span style="color:#a6e22e">set</span>(<span style="color:#66d9ef">true</span>, <span style="color:#e6db74">&#39;bool1&#39;</span>);

</code></pre></div><h3 id="map-迭代">Map 迭代</h3>
<p>如果要在 map 里使用循环，可以使用以下三个方法：</p>
<p>map.keys() —— 遍历并返回所有的键（returns an iterable for keys），
map.values() —— 遍历并返回所有的值（returns an iterable for values），
map.entries() —— 遍历并返回所有的实体（returns an iterable for entries）[key, value]，for..of 在默认情况下使用的就是这个。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">recipeMap</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>([
  [<span style="color:#e6db74">&#39;cucumber&#39;</span>, <span style="color:#ae81ff">500</span>],
  [<span style="color:#e6db74">&#39;tomatoes&#39;</span>, <span style="color:#ae81ff">350</span>],
  [<span style="color:#e6db74">&#39;onion&#39;</span>,    <span style="color:#ae81ff">50</span>]
]);

<span style="color:#75715e">// 遍历所有的键（vegetables）
</span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">vegetable</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">recipeMap</span>.<span style="color:#a6e22e">keys</span>()) {
  <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">vegetable</span>); <span style="color:#75715e">// cucumber, tomatoes, onion
</span><span style="color:#75715e"></span>}

<span style="color:#75715e">// 遍历所有的值（amounts）
</span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">amount</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">recipeMap</span>.<span style="color:#a6e22e">values</span>()) {
  <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">amount</span>); <span style="color:#75715e">// 500, 350, 50
</span><span style="color:#75715e"></span>}

<span style="color:#75715e">// 遍历所有的实体 [key, value]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">entry</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">recipeMap</span>) { <span style="color:#75715e">// 与 recipeMap.entries() 相同
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">entry</span>); <span style="color:#75715e">// cucumber,500 (and so on)
</span><span style="color:#75715e"></span>}
</code></pre></div><p>迭代的顺序与插入值的顺序相同。与普通的 Object 不同，Map 保留了此顺序。</p>
<h3 id="objectentries从对象创建-map">Object.entries：从对象创建 Map</h3>
<p>当创建一个 Map 后，我们可以传入一个带有键值对的数组（或其它可迭代对象）来进行初始化，如下所示</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// 键值对 [key, value] 数组
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">map</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>([
  [<span style="color:#e6db74">&#39;1&#39;</span>,  <span style="color:#e6db74">&#39;str1&#39;</span>],
  [<span style="color:#ae81ff">1</span>,    <span style="color:#e6db74">&#39;num1&#39;</span>],
  [<span style="color:#66d9ef">true</span>, <span style="color:#e6db74">&#39;bool1&#39;</span>]
]);

<span style="color:#a6e22e">alert</span>( <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;1&#39;</span>) ); <span style="color:#75715e">// str1
</span></code></pre></div><p>如果我们想从一个已有的普通对象（plain object）来创建一个 Map，那么我们可以使用内建方法 Object.entries(obj)，该返回对象的键/值对数组，该数组格式完全按照 Map 所需的格式。</p>
<p>所以可以像下面这样从一个对象创建一个 Map：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> {
  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;John&#34;</span>,
  <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span>
};

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">map</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>(Object.<span style="color:#a6e22e">entries</span>(<span style="color:#a6e22e">obj</span>));

<span style="color:#a6e22e">alert</span>( <span style="color:#a6e22e">map</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;name&#39;</span>) ); <span style="color:#75715e">// John
</span><span style="color:#75715e"></span>

</code></pre></div><p>这里，Object.entries 返回键/值对数组：[ [&ldquo;name&rdquo;,&ldquo;John&rdquo;], [&ldquo;age&rdquo;, 30] ]。这就是 Map 所需要的格式。</p>
<h3 id="objectfromentries从-map-创建对象">Object.fromEntries：从 Map 创建对象</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">prices</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">fromEntries</span>([
  [<span style="color:#e6db74">&#39;banana&#39;</span>, <span style="color:#ae81ff">1</span>],
  [<span style="color:#e6db74">&#39;orange&#39;</span>, <span style="color:#ae81ff">2</span>],
  [<span style="color:#e6db74">&#39;meat&#39;</span>, <span style="color:#ae81ff">4</span>]
]);

<span style="color:#75715e">// 现在 prices = { banana: 1, orange: 2, meat: 4 }
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">prices</span>.<span style="color:#a6e22e">orange</span>); <span style="color:#75715e">// 2
</span></code></pre></div><h4 id="与其他数据结构互相转化">与其他数据结构互相转化</h4>
<p>Map 转为数组</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">myMap</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>().<span style="color:#a6e22e">set</span>(<span style="color:#66d9ef">true</span>, <span style="color:#ae81ff">7</span>).<span style="color:#a6e22e">set</span>({<span style="color:#a6e22e">foo</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>}, [<span style="color:#e6db74">&#39;abc&#39;</span>]);
[...<span style="color:#a6e22e">myMap</span>]
</code></pre></div><p>数组转map</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>([
  [<span style="color:#66d9ef">true</span>, <span style="color:#ae81ff">7</span>],
  [{<span style="color:#a6e22e">foo</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>}, [<span style="color:#e6db74">&#39;abc&#39;</span>]]
])
</code></pre></div><p>Map 转为对象</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">strMapToObj</span>(<span style="color:#a6e22e">strMap</span>) {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">create</span>(<span style="color:#66d9ef">null</span>);
  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> [<span style="color:#a6e22e">k</span>,<span style="color:#a6e22e">v</span>] <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">strMap</span>) {
    <span style="color:#a6e22e">obj</span>[<span style="color:#a6e22e">k</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">v</span>;
  }
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">obj</span>;
}

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">myMap</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>().<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#39;yes&#39;</span>, <span style="color:#66d9ef">true</span>).<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#39;no&#39;</span>, <span style="color:#66d9ef">false</span>);
<span style="color:#a6e22e">strMapToObj</span>(<span style="color:#a6e22e">myMap</span>)
</code></pre></div><p>对象转Map</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;a&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;b&#34;</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>};
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">map</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>(Object.<span style="color:#a6e22e">entries</span>(<span style="color:#a6e22e">obj</span>));

<span style="color:#75715e">// or 
</span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">objToStrMap</span>(<span style="color:#a6e22e">obj</span>) {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">strMap</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>();
  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">k</span> <span style="color:#66d9ef">of</span> Object.<span style="color:#a6e22e">keys</span>(<span style="color:#a6e22e">obj</span>)) {
    <span style="color:#a6e22e">strMap</span>.<span style="color:#a6e22e">set</span>(<span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">obj</span>[<span style="color:#a6e22e">k</span>]);
  }
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">strMap</span>;
}

<span style="color:#a6e22e">objToStrMap</span>({<span style="color:#a6e22e">yes</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>, <span style="color:#a6e22e">no</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>})
</code></pre></div><p>Map 转为 JSON</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// 一种情况是，Map 的键名都是字符串
</span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">strMapToJson</span>(<span style="color:#a6e22e">strMap</span>) {
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>(<span style="color:#a6e22e">strMapToObj</span>(<span style="color:#a6e22e">strMap</span>));
}

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">myMap</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>().<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#39;yes&#39;</span>, <span style="color:#66d9ef">true</span>).<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#39;no&#39;</span>, <span style="color:#66d9ef">false</span>);
<span style="color:#a6e22e">strMapToJson</span>(<span style="color:#a6e22e">myMap</span>)

<span style="color:#75715e">// 另一种情况是，Map 的键名有非字符串，这时可以选择转为数组 JSON。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">mapToArrayJson</span>(<span style="color:#a6e22e">map</span>) {
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">stringify</span>([...<span style="color:#a6e22e">map</span>]);
}

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">myMap</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>().<span style="color:#a6e22e">set</span>(<span style="color:#66d9ef">true</span>, <span style="color:#ae81ff">7</span>).<span style="color:#a6e22e">set</span>({<span style="color:#a6e22e">foo</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span>}, [<span style="color:#e6db74">&#39;abc&#39;</span>]);
<span style="color:#a6e22e">mapToArrayJson</span>(<span style="color:#a6e22e">myMap</span>)
</code></pre></div><p>JSON 转为 Map</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#75715e">// JSON 转为 Map，正常情况下，所有键名都是字符串。
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">jsonToStrMap</span>(<span style="color:#a6e22e">jsonStr</span>) {
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">objToStrMap</span>(<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">jsonStr</span>));
}

<span style="color:#a6e22e">jsonToStrMap</span>(<span style="color:#e6db74">&#39;{&#34;yes&#34;: true, &#34;no&#34;: false}&#39;</span>)
<span style="color:#75715e">// Map {&#39;yes&#39; =&gt; true, &#39;no&#39; =&gt; false}
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// 但是，有一种特殊情况，整个 JSON 就是一个数组，且每个数组成员本身，又是一个有两个成员的数组。这时，它可以一一对应地转为 Map。这往往是 Map 转为数组 JSON 的逆操作。
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">jsonToMap</span>(<span style="color:#a6e22e">jsonStr</span>) {
  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Map</span>(<span style="color:#a6e22e">JSON</span>.<span style="color:#a6e22e">parse</span>(<span style="color:#a6e22e">jsonStr</span>));
}

<span style="color:#a6e22e">jsonToMap</span>(<span style="color:#e6db74">&#39;[[true,7],[{&#34;foo&#34;:3},[&#34;abc&#34;]]]&#39;</span>)
<span style="color:#75715e">// Map {true =&gt; 7, Object {foo: 3} =&gt; [&#39;abc&#39;]}
</span></code></pre></div><h3 id="set">Set</h3>
<p>Set 是一个特殊的类型集合 —— “值的集合”（没有键），它的每一个值只能出现一次。</p>
<p>它的主要方法如下：</p>
<ul>
<li>new Set(iterable) —— 创建一个 set，如果提供了一个 iterable 对象（通常是数组），将会从数组里面复制值到 set 中。</li>
<li>set.add(value) —— 添加一个值，返回 set 本身</li>
<li>set.delete(value) —— 删除值，如果 value 在这个方法调用的时候存在则返回 true ，否则返回 false。</li>
<li>set.has(value) —— 如果 value 在 set 中，返回 true，否则返回 false。</li>
<li>set.clear() —— 清空 set。</li>
<li>set.size —— 返回元素个数。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">set</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Set</span>();

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">john</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;John&#34;</span> };
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">pete</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Pete&#34;</span> };
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">mary</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Mary&#34;</span> };

<span style="color:#75715e">// visits，一些访客来访好几次
</span><span style="color:#75715e"></span><span style="color:#a6e22e">set</span>.<span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">john</span>);
<span style="color:#a6e22e">set</span>.<span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">pete</span>);
<span style="color:#a6e22e">set</span>.<span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">mary</span>);
<span style="color:#a6e22e">set</span>.<span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">john</span>);
<span style="color:#a6e22e">set</span>.<span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">mary</span>);

<span style="color:#75715e">// set 只保留不重复的值
</span><span style="color:#75715e"></span><span style="color:#a6e22e">alert</span>( <span style="color:#a6e22e">set</span>.<span style="color:#a6e22e">size</span> ); <span style="color:#75715e">// 3
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">user</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">set</span>) {
  <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">name</span>); <span style="color:#75715e">// John（然后 Pete 和 Mary）
</span><span style="color:#75715e"></span>}
</code></pre></div><p>Set 的替代方法可以是一个用户数组，用 arr.find 在每次插入值时检查是否重复。但是这样性能会很差，因为这个方法会遍历整个数组来检查每个元素。Set 内部对唯一性检查进行了更好的优化。</p>
<h3 id="set-迭代iteration">Set 迭代（iteration）</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">set</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Set</span>([<span style="color:#e6db74">&#34;oranges&#34;</span>, <span style="color:#e6db74">&#34;apples&#34;</span>, <span style="color:#e6db74">&#34;bananas&#34;</span>]);

<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">value</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">set</span>) {
  <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">value</span>);
}

<span style="color:#75715e">// 与 forEach 相同：
</span><span style="color:#75715e"></span><span style="color:#a6e22e">set</span>.<span style="color:#a6e22e">forEach</span>((<span style="color:#a6e22e">value</span>, <span style="color:#a6e22e">valueAgain</span>, <span style="color:#a6e22e">set</span>) =&gt; {
  <span style="color:#a6e22e">alert</span>(<span style="color:#a6e22e">value</span>);
});
</code></pre></div><p>Map 中用于迭代的方法在 Set 中也同样支持：</p>
<ul>
<li>set.keys() —— 遍历并返回所有的值（returns an iterable object for values），</li>
<li>set.values() —— 与 set.keys() 作用相同，这是为了兼容 Map，</li>
<li>set.entries() —— 遍历并返回所有的实体（returns an iterable object for entries）[value, value]，它的存在也是为了兼容 Map。</li>
</ul>
<h3 id="测试题">测试题</h3>
<ol>
<li>数组去重</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">unique</span>(<span style="color:#a6e22e">arr</span>) {
  <span style="color:#66d9ef">return</span> Array.<span style="color:#a6e22e">from</span>(<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Set</span>(<span style="color:#a6e22e">arr</span>));
}
</code></pre></div><h3 id="总结">总结</h3>
<p>Map —— 是一个带键的数据项的集合。</p>
<p>方法和属性如下：</p>
<ul>
<li>new Map([iterable]) —— 创建 map，可选择带有 [key,value] 对的 iterable（例如数组）来进行初始化。</li>
<li>map.set(key, value) —— 根据键存储值。</li>
<li>map.get(key) —— 根据键来返回值，如果 map 中不存在对应的 key，则返回 undefined。</li>
<li>map.has(key) —— 如果 key 存在则返回 true，否则返回 false。</li>
<li>map.delete(key) —— 删除指定键的值。</li>
<li>map.clear() —— 清空 map 。</li>
<li>map.size —— 返回当前元素个数。</li>
</ul>
<p>与普通对象 Object 的不同点：</p>
<ul>
<li>任何键、对象都可以作为键。</li>
<li>有其他的便捷方法，如 size 属性。</li>
<li>Set —— 是一组唯一值的集合。</li>
</ul>
<p>方法和属性：</p>
<ul>
<li>new Set([iterable]) —— 创建 set，可选择带有 iterable（例如数组）来进行初始化。</li>
<li>set.add(value) —— 添加一个值（如果 value 存在则不做任何修改），返回 set 本身。</li>
<li>set.delete(value) —— 删除值，如果 value 在这个方法调用的时候存在则返回 true ，否则返回 false。</li>
<li>set.has(value) —— 如果 value 在 set 中，返回 true，否则返回 false。</li>
<li>set.clear() —— 清空 set。</li>
<li>set.size —— 元素的个数。</li>
</ul>
<p>在 Map 和 Set 中迭代总是按照值插入的顺序进行的，所以我们不能说这些集合是无序的，但是我们不能对元素进行重新排序，也不能直接按其编号来获取元素。</p>
<h3 id="参考链接">参考链接</h3>
<ul>
<li><a href="https://zh.javascript.info/map-set">Map and Set（映射和集合）</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Map">MDN Map</a></li>
</ul>

  </div>
</article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  <a href="https://example.org/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
     - 
    2021<span class="heart"><i class="iconfont icon-heart"></i></span><span>olOwOlo</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>








</body>
</html>
