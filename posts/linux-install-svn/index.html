<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>
        Linux Install Svn ::
        Strawbreey Notes
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="SVN（Subversion）是一个自由、开源的项目源代码版本控制工具。目前，绝大多数开源软件和企业代码管理，都使用SVN作为代码版本管理软"
/>
<meta
  name="keywords"
  content=""
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="/posts/linux-install-svn/" />





<link rel="stylesheet" href="/assets/style.css" />

<link rel="stylesheet" href="/style.css" />


<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.3.2/build/styles/atom-one-dark.min.css">

<link
  rel="apple-touch-icon-precomposed"
  sizes="144x144"
  href="/img/apple-touch-icon-144-precomposed.png"
/>
<link rel="shortcut icon" href="/favicon.png" />

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>




<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux Install Svn"/>
<meta name="twitter:description" content="SVN（Subversion）是一个自由、开源的项目源代码版本控制工具。目前，绝大多数开源软件和企业代码管理，都使用SVN作为代码版本管理软"/>



<meta property="og:title" content="Linux Install Svn" />
<meta property="og:description" content="SVN（Subversion）是一个自由、开源的项目源代码版本控制工具。目前，绝大多数开源软件和企业代码管理，都使用SVN作为代码版本管理软" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/linux-install-svn/" />
<meta property="article:published_time" content="2020-12-29T17:03:17+08:00" />
<meta property="article:modified_time" content="2020-12-29T17:03:17+08:00" /><meta property="og:site_name" content="Strawbreey Notes" />






  </head>
  <body class="">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    
    <span class="logo__text">
      Strawbreey Notes
    </span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/showcase">Showcase</a></li>
        
      
      
      
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/showcase">Showcase</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <div class="post">
    <h1 class="post-title">Linux Install Svn</h1>
    <div class="post-meta">
      
        <span class="post-date">
          2020-12-29
        </span>

        
          
        
      

      


      
        <span class="post-read-time"
          >— 7 min read</span
        >
      
    </div>

    

    

    <div class="post-content">
      <p>SVN（Subversion）是一个自由、开源的项目源代码版本控制工具。目前，绝大多数开源软件和企业代码管理，都使用SVN作为代码版本管理软件。</p>
<p>Subversion将文件存放在中心版本库里，这个版本库很像一个普通的文件服务器。不同的是，它可以记录每一次文件和目录的修改情况，这样就可以在需要的回滚时，将数据恢复到以前的版本，并可以查看数据的更改细节。</p>
<p>SVN 官方网址：Apache Subversion</p>
<p>SVN 服务器配置：安装SVN服务器</p>
<h3 id="svn-安装">svn 安装</h3>
<p>查看svn版本</p>
<p>svnserve &ndash;version</p>
<p>ubuntu 安装svn 1.7、1.8</p>
<p>当前 ubuntu 12.04 中的 svn 版本为 1.6，这个版本会在每个子目录新建一个.svn 的目录保存版本文件，很不爽。找到一个第三方编译的 ubuntu 源：
1） 打开source.list源：</p>
<p>sudo vi /etc/apt/sources.list</p>
<p>2） 添加源</p>
<p>deb <a href="http://ppa.launchpad.net/dominik-stadler/subversion-1.7/ubuntu">http://ppa.launchpad.net/dominik-stadler/subversion-1.7/ubuntu</a> precise main</p>
<p>deb-src <a href="http://ppa.launchpad.net/dominik-stadler/subversion-1.7/ubuntu">http://ppa.launchpad.net/dominik-stadler/subversion-1.7/ubuntu</a> precise main</p>
<p>3） 执行安装命令</p>
<p>sudo apt-get install subversion</p>
<h3 id="svn-常用命令">SVN 常用命令</h3>
<ol>
<li>将文件checkout到本地目录</li>
</ol>
<p>svn checkout path
svn co path</p>
<ol start="2">
<li>
<p>往版本库中添加新的文件
svn add file</p>
</li>
<li>
<p>将改动的文件提交到版本库
svn commit -m “LogMessage” [-N] [&ndash;no-unlock] PATH(如果选择了保持锁，就使用–no-unlock开关)
简写：svn ci</p>
</li>
<li>
<p>加锁/解锁
svn lock -m “LockMessage” [&ndash;force] PATH
svn unlock PATH</p>
</li>
<li>
<p>更新到某个版本
svn update -r m path
简写：svn up</p>
</li>
<li>
<p>查看文件或者目录状态
1）svn status path（目录下的文件和子目录的状态，正常状态不显示）
2）svn status -v path(显示文件和子目录状态)
简写：svn st</p>
</li>
<li>
<p>删除文件
svn delete path -m “delete test fle”
简写：svn (del, remove, rm)</p>
</li>
<li>
<p>查看日志
svn log path</p>
</li>
<li>
<p>查看文件详细信息
svn info path</p>
</li>
<li>
<p>比较差异</p>
</li>
</ol>
<p>svn diff path (将修改的文件与基础版本比较)
svn diff -r m:n path (对版本m和版本n比较差异)</p>
<p>简写：svn di</p>
<ol start="11">
<li>
<p>将两个版本之间的差异合并到当前文件
svn merge -r m:n path</p>
</li>
<li>
<p>SVN 帮助
svn help
svn help ci</p>
</li>
<li>
<p>版本库下的文件和目录列表</p>
</li>
</ol>
<p>svn list path</p>
<p>显示path目录下的所有属于版本库的文件和目录简写：svn ls</p>
<ol start="14">
<li>创建纳入版本控制下的新目录</li>
</ol>
<p>svn mkdir: 创建纳入版本控制下的新目录。
用法: 
1、mkdir PATH&hellip;
每一个以工作副本 PATH 指定的目录，都会创建在本地端，并且加入新增调度，以待下一次的提交。
2、mkdir URL&hellip; 创建版本控制的目录。 
每个以URL指定的目录，都会透过立即提交于仓库中创建。在这两个情况下，所有的中间目录都必须事先存在。</p>
<ol start="15">
<li>
<p>恢复本地修改
svn revert: 恢复原始未改变的工作副本文件 (恢复大部份的本地修改)。
用法: revert PATH&hellip; 注意: 本子命令不会存取网络，并且会解除冲突的状况。但是它不会恢复被删除的目录</p>
</li>
<li>
<p>代码库URL变更
svn switch (sw): 更新工作副本至不同的URL。
用法: 
1、switch URL [PATH]     <br>
更新你的工作副本，映射到一个新的URL，其行为跟“svn update”很像，也会将      服务器上文件与本地文件合并。这是将工作副本对应到同一仓库中某个分支或者标记的方法。 
2、switch &ndash;relocate FROM TO [PATH&hellip;]<br>
改写工作副本的URL元数据，以反映单纯的URL上的改变。当仓库的根URL变动     (比如方案名或是主机名称变动)，但是工作副本仍旧对映到同一仓库的同一目录时使用     这个命令更新工作副本与仓库的对应关系。</p>
</li>
<li>
<p>解决冲突
svn resolved: 移除工作副本的目录或文件的“冲突”状态。
用法: resolved PATH&hellip; 注意: 本子命令不会依语法来解决冲突或是移除冲突标记；它只是移除冲突的相关文件，然后让 PATH 可以再次提交。</p>
</li>
<li>
<p>输出指定文件或URL的内容。
svn cat 目标[@版本]&hellip;如果指定了版本，将从指定的版本开始查找。 svn cat -r PREV filename &gt; filename (PREV 是上一版本,也可以写具体版本号,这样输出结果是可以提交的）</p>
</li>
<li>
<p>svn cleanup
当Subversion修改你的工作副本时（或者任何在.svn中的信息），它尝试尽可能做到安全。在改变一个工作副本前，Subversion把它的意 图写到一个日志文件中。接下来它执行日志文件中的命令来应用要求的修改。最后，Subversion删除日志文件。从架构上来说，这与一个日志文件系统 （journaled filesystem）类似。如果一个 Subversion操作被打断（例如，进程被杀掉了，或机器当掉了）了，日志文件仍在硬盘上。重新执行日志文件，Subversion可以完成先前开始 的操作，这样你的工作副本能回到一个可靠的状态。</p>
</li>
<li>
<p>svn import</p>
</li>
</ol>
<p>使用svn import是把未版本化的文件树复制到资料库的快速办法，它需要创建一个临时目录。</p>
<h3 id="svn-常用命令一览表">SVN 常用命令一览表</h3>
<table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
<th>使用格式</th>
</tr>
</thead>
<tbody>
<tr>
<td>checkout</td>
<td>检出</td>
<td>svn co URL</td>
</tr>
<tr>
<td>up</td>
<td>更新到当前URL的末端</td>
<td>svn  up</td>
</tr>
<tr>
<td>switch</td>
<td>更新到某一tag/branch	svn  switch  (tag/分支)URL</td>
<td></td>
</tr>
<tr>
<td>add</td>
<td>增加	svn  add  文件名</td>
<td></td>
</tr>
<tr>
<td>rm</td>
<td>删除文件	svn  rm 文件名</td>
<td></td>
</tr>
<tr>
<td>删除目录	svn  rm 目录名</td>
<td></td>
<td></td>
</tr>
<tr>
<td>diff	与base版本（最后检出或者更新到的版本）对比	svn  diff</td>
<td></td>
<td></td>
</tr>
<tr>
<td>与版本库中最新版本对比	svn  diff  -r  head</td>
<td></td>
<td></td>
</tr>
<tr>
<td>当前工作副本，两个版本之间对比	svn  diff  -r  reversion1:reversion2</td>
<td></td>
<td></td>
</tr>
<tr>
<td>版本库中任意两个tag做对比	svn   diff    (tag1)URL    (tag2)URL</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ci	提交	svn ci -m &ldquo;commit log&rdquo;</td>
<td></td>
<td></td>
</tr>
<tr>
<td>log	查看当前工作副本log	svn  log</td>
<td></td>
<td></td>
</tr>
<tr>
<td>只查看指定版本的log	svn  log  -r</td>
<td></td>
<td></td>
</tr>
<tr>
<td>打印log所有附加信息	svn  log  -v</td>
<td></td>
<td></td>
</tr>
<tr>
<td>查看当前tag/branch版本详情	svn  log &ndash;stop-on-copy -v</td>
<td></td>
<td></td>
</tr>
<tr>
<td>info	查看当前工作副本所在URL	svn  info</td>
<td></td>
<td></td>
</tr>
<tr>
<td>status	查看工作副本的状态	svn st</td>
<td></td>
<td></td>
</tr>
<tr>
<td>查看文件的taglist	svn命令不支持，可执行cs taglist</td>
<td></td>
<td></td>
</tr>
<tr>
<td>tag	新增tag	svn cp . （tag）URL</td>
<td></td>
<td></td>
</tr>
<tr>
<td>删除tag	svn rm （tag）URL -m &ldquo;commit log&rdquo;</td>
<td></td>
<td></td>
</tr>
<tr>
<td>覆盖已经存在的tag	不支持</td>
<td></td>
<td></td>
</tr>
<tr>
<td>分支开发	创建branch	svn  cp  （基线版本）URL （分支）URL  -m &ldquo;commit log&rdquo;</td>
<td></td>
<td></td>
</tr>
<tr>
<td>删除branch	svn rm （分支）URL   -m &ldquo;commit log&rdquo;</td>
<td></td>
<td></td>
</tr>
<tr>
<td>同步	svn co （主干）URL</td>
<td></td>
<td></td>
</tr>
<tr>
<td>cd ~/wc</td>
<td></td>
<td></td>
</tr>
<tr>
<td>svn merge （主干）URL （待同步tag）URL</td>
<td></td>
<td></td>
</tr>
<tr>
<td>svn ci -m &ldquo;commit log&rdquo;</td>
<td></td>
<td></td>
</tr>
<tr>
<td>svn cp （主干）URL （以_PD_BL_MAIN结尾的tag）URL -m&quot;commit log&rdquo;</td>
<td></td>
<td></td>
</tr>
<tr>
<td>合并	svn co （合并目标）URL</td>
<td></td>
<td></td>
</tr>
<tr>
<td>cd ~/wc</td>
<td></td>
<td></td>
</tr>
<tr>
<td>svn merge （基线版本tag）URL  （上线tag）URL</td>
<td></td>
<td></td>
</tr>
<tr>
<td>svn ci -m &ldquo;commit log&rdquo;</td>
<td></td>
<td></td>
</tr>
<tr>
<td>svn cp （合并目标）URL （上线tag_MERGE_的tag对应）URL -m&quot;commit log&rdquo;</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>SVN实例</p>
<p>删除目录下所有的 .svn 隐藏子目录</p>
<p>find . -name &ldquo;.svn&rdquo; -print0 | xargs -0 rm -rf</p>
<p>tags打分支</p>
<p>svn  cp  trunk/    tags/platform_2011.11.11    （或 svn  cp  http://192.168.1.100/platform/trunk/    http://192.168.1.100/platform/tags/platform_2011.11.11）</p>
<p>svn  ci  -m  &ldquo;svn  cp  trunk/    tags/platform_2011.11.11&rdquo;         // 提交，并给出提交记录（-m  &ldquo;svn  cp  trunk/    tags/platform_2011.11.11&rdquo;）</p>
<p>svn 改名</p>
<p>svn  mv  platform_2011.11.11   platform_20111111</p>
<p>svn  ci  -m  &ldquo;svn  mv  platform_2011.11.11   platform_20111111&rdquo;        // 提交</p>
<p>svn directory is missing</p>
<p>1） svn up missingDirName
2） svn del missingDirName
3） svn ci</p>
<p>svn chech version</p>
<p>svn  co  http://192.168.1.100/platform/branch  -r  12  platform_branch_v12</p>
<p>svn log</p>
<p>svn  log  http://192.168.1.100/platform/branch  -l10              // svn  文字注释log</p>
<p>svn  log  http://192.168.1.100/platform/branch  -l10  -v          // svn 文字注释log + 文件更新log（增，删，改）</p>
<p>svn diff -r  v_1 : v_2 svn_path</p>
<p>svn diff -r 200:201 test.php</p>
<p>linux安装svn服务器（yum方式）
分类 编程技术
1.查看yum是否安装
在终端中输入yum即可如果已经安装，会显示yum的参数,如果没有安装，会提示yum未安装或无效命令……</p>
<p>2.安装svn
yum -y install subversion
出现下面截图后，表示安装完成。</p>
<p>3.创建目录并配置
建立版本库目录</p>
<p>mkdir -p /data/svn/repo
配置 /p&gt;</p>
<p>svnadmin create  /data/svn/repo
执行上面的命令后，自动建立repo测试库，查看/data/svn/repo 文件夹发现包含了conf, db,format,hooks, locks, README.txt等文件，说明一个SVN库已经建立。</p>
<p>4.用户密码passwd配置
[root@localhost password]# cd /data/svn/repos/conf
[root@admin conf]# vim passwd
修改passwd为以下内容：</p>
<p>[users]</p>
<h1 id="harry--harryssecret">harry = harryssecret</h1>
<h1 id="sally--sallyssecret">sally = sallyssecret</h1>
<p>hello=123
用户名=密码</p>
<p>这样我们就建立了hello用户， 123密码</p>
<p>以上语句都必须顶格写, 左侧不能留空格, 否则会出错.</p>
<p>5.权限控制authz配置
[root@admin conf]# vi  authz
目的是设置哪些用户可以访问哪些目录，向authz文件追加以下内容：</p>
<p>#设置[/]代表根目录下所有的资源   或者写成[repl:/]
[/]
hello = rw
意思是hello用户对repo测试库下所有的目录有读写权限，当然也可以限定。 如果是自己用，就直接是读写吧。</p>
<p>以上语句都必须顶格写, 左侧不能留空格, 否则会出错.</p>
<p>6.服务svnserve.conf配置
[root@admin conf]# vim svnserve.conf
追加以下内容：</p>
<p>[general]
#匿名访问的权限，可以是read,write,none,默认为read
anon-access=none
#使授权用户有写权限 
auth-access=write
#密码数据库的路径 
password-db=passwd
#访问控制文件 
authz-db=authz
#认证命名空间，subversion会在认证提示里显示，并且作为凭证缓存的关键字 
realm=/data/svn/repositories
以上语句都必须顶格写, 左侧不能留空格, 否则会出错.</p>
<p>7.启动svn服务
查看svn的服务是否启动</p>
<p>ps -ef|grep svn
如果没有启动执行 下面命令即可：</p>
<p>svnserve -d -r /data/svn/repo  &ndash;listen-port=3690 
8.开启端口
/sbin/iptables -I INPUT -p tcp &ndash;dport 3690 -j ACCEPT
/etc/rc.d/init.d/iptables save
/etc/init.d/iptables restart
/etc/init.d/iptables status
9.访问
svn://ip地址</p>
<p>端口默认为3690，输入配置好的用户名和密码即可。</p>
<p>注意：此处千万不能 svn://ip地址/repo，否则无法访问。</p>
<h3 id="参考资料">参考资料</h3>
<ul>
<li><a href="https://www.runoob.com/w3cnote/linux-subversion-yum.html">linux安装svn服务器（yum方式）</a></li>
</ul>

    </div>
    
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h"
              >Read other posts</span
            >
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="/posts/composer-install/">
                  <span class="button__icon">←</span>
                  <span class="button__text">Composer Install</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="/posts/shell-sed/">
                  <span class="button__text">Shell Sed</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    

    
      
        

<div id="gitalk-container"></div>
<script>
  const gitalk = new Gitalk({
    clientID: '4655ac5540fffb80a545',
    clientSecret: '714d4e40a23897dc8e329b9d1ec37a1ffe8fd5d3',
    repo: 'https://github.com/strawbreey/notes',      
    owner: 'strawbreey',
    admin: ['strawbreey'],
    id: location.pathname,      
    distractionFreeMode: false  
  })

  gitalk.render('gitalk-container')
</script>
      
    
  </div>

  <aside class="aside table-of-contents">
    
    <section class="toc">
        <h3>title</h3>
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#svn-安装">svn 安装</a></li>
        <li><a href="#svn-常用命令">SVN 常用命令</a></li>
        <li><a href="#svn-常用命令一览表">SVN 常用命令一览表</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#参考资料">参考资料</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </section>

    


<section class="related">
  <h3>See Also</h3>
  <ul>
    
    <li><a href="/posts/shell-sed/">Shell Sed</a></li>
    
    <li><a href="/posts/apache-php/">Apache Php</a></li>
    
    <li><a href="/posts/linux-apache-php/">Linux Apache Php</a></li>
    
    <li><a href="/posts/linux-nginx-apache/">Linux Nginx Apache</a></li>
    
    <li><a href="/posts/apache-install/">Apache Install</a></li>
    
  </ul>
  
</section>
  </aside>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">Copyright©2019-2020 Strawbreey. All Rights Reserved</div>
      
  </div>
</footer>

<script src="/assets/main.js"></script>





<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.3.2/build/highlight.min.js"></script>




      
    </div>

    
  </body>
</html>
