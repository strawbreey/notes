<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>
        Go Example ::
        Strawbreey Notes
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="1. 编译 package main import &amp;#34;fmt&amp;#34; func main() { fmt.Println(&amp;#34;hello world&amp;#34;) } 要运行这个程序，将这些代码放到 hello-world.go 中并且使用 go run 命令。 go run hello-world.go hello world 有时候我们想将我们的程序编译成二进制文件。我们可以通"
/>
<meta
  name="keywords"
  content=""
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="/posts/go-example/" />





<link rel="stylesheet" href="/assets/style.css" />

<link rel="stylesheet" href="/style.css" />


<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.3.2/build/styles/atom-one-dark.min.css">

<link
  rel="apple-touch-icon-precomposed"
  sizes="144x144"
  href="/img/apple-touch-icon-144-precomposed.png"
/>
<link rel="shortcut icon" href="/favicon.png" />

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>




<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Go Example"/>
<meta name="twitter:description" content="1. 编译 package main import &#34;fmt&#34; func main() { fmt.Println(&#34;hello world&#34;) } 要运行这个程序，将这些代码放到 hello-world.go 中并且使用 go run 命令。 go run hello-world.go hello world 有时候我们想将我们的程序编译成二进制文件。我们可以通"/>



<meta property="og:title" content="Go Example" />
<meta property="og:description" content="1. 编译 package main import &#34;fmt&#34; func main() { fmt.Println(&#34;hello world&#34;) } 要运行这个程序，将这些代码放到 hello-world.go 中并且使用 go run 命令。 go run hello-world.go hello world 有时候我们想将我们的程序编译成二进制文件。我们可以通" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/go-example/" />
<meta property="article:published_time" content="2020-12-14T12:18:37+08:00" />
<meta property="article:modified_time" content="2020-12-14T12:18:37+08:00" /><meta property="og:site_name" content="Strawbreey Notes" />






  </head>
  <body class="">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    
    <span class="logo__text">
      Strawbreey Notes
    </span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/showcase">Showcase</a></li>
        
      
      
      
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/showcase">Showcase</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <div class="post">
    <h1 class="post-title">Go Example</h1>
    <div class="post-meta">
      
        <span class="post-date">
          2020-12-14
        </span>

        
          
        
      

      


      
        <span class="post-read-time"
          >— 11 min read</span
        >
      
    </div>

    

    

    <div class="post-content">
      <h3 id="1-编译">1. 编译</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;hello world&#34;</span>)
}
</code></pre></div><p>要运行这个程序，将这些代码放到 hello-world.go 中并且使用 go run 命令。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">go run hello-world.go
hello world
</code></pre></div><p>有时候我们想将我们的程序编译成二进制文件。我们可以通过 go build 命来达到目的。</p>
<pre><code>go build hello-world.go
ls
</code></pre><p>hello-world
然后我们可以直接运行这个二进制文件。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ls
hello-world	hello-world.go
./hello-world
</code></pre></div><h3 id="2-字符串">2. 字符串</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;go&#34;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;lang&#34;</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;1+1 =&#34;</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;7.0/3.0 =&#34;</span>, <span style="color:#ae81ff">7.0</span><span style="color:#f92672">/</span><span style="color:#ae81ff">3.0</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#66d9ef">true</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">false</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#66d9ef">true</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">false</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(!<span style="color:#66d9ef">true</span>)

    <span style="color:#75715e">// golang
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 1+1 = 2
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 7.0/3.0 = 2.3333333333333335
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// false
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// true
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// fals
</span><span style="color:#75715e"></span>}
</code></pre></div><h3 id="3-变量">3. 变量</h3>
<ol>
<li>var 声明 1 个或者多个变量。</li>
<li>你可以申明一次性声明多个变量。</li>
<li>Go 将自动推断已经初始化的变量类型。</li>
<li>声明变量且没有给出对应的初始值时，变量将会初始化为零值 。例如，一个 int 的零值是 0。</li>
<li>:= 语句是申明并初始化变量的简写，例如这个例子中的 var f string = &ldquo;short&rdquo;。</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> <span style="color:#66d9ef">string</span> = <span style="color:#e6db74">&#34;initial&#34;</span>
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">b</span>, <span style="color:#a6e22e">c</span> <span style="color:#66d9ef">int</span> = <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">d</span> = <span style="color:#66d9ef">true</span>
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">e</span> <span style="color:#66d9ef">int</span>
    <span style="color:#a6e22e">f</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;short&#34;</span>
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">f</span>)

    <span style="color:#75715e">// initial
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 1 2
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// true
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 0
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// short
</span><span style="color:#75715e"></span>}
</code></pre></div><h3 id="4-常量">4. 常量</h3>
<ul>
<li>Go 支持字符、字符串、布尔和数值 常量 。</li>
<li>const 用于声明一个常量。</li>
<li>const 语句可以出现在任何 var 语句可以出现的地方</li>
<li>常数表达式可以执行任意精度的运算</li>
<li>数值型常量是没有确定的类型的，直到它们被给定了一个类型，比如说一次显示的类型转化</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;math&#34;</span>

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">s</span> <span style="color:#66d9ef">string</span> = <span style="color:#e6db74">&#34;constant&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">s</span>)
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">n</span> = <span style="color:#ae81ff">500000000</span>
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">d</span> = <span style="color:#ae81ff">3e20</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">n</span>
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">d</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(int64(<span style="color:#a6e22e">d</span>))
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">math</span>.<span style="color:#a6e22e">Sin</span>(<span style="color:#a6e22e">n</span>))

    <span style="color:#75715e">// constant
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 6e+11
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 600000000000
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// -0.28470407323754404
</span><span style="color:#75715e"></span>}
</code></pre></div><h3 id="5-for-循环">5. For 循环</h3>
<p>for 是 Go 中唯一的循环结构。这里有 for 循环的三个基本使用方式。</p>
<ul>
<li>单个循环条件</li>
<li>经典的初始化/条件/后续形式 for 循环</li>
<li>不带条件的 for 循环将一直执行，直到在循环体内使用了 break 或者 return 来跳出循环</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// `for` 是 Go 中唯一的循环结构。这里有 `for` 循环的三个基本使用方式。
</span><span style="color:#75715e"></span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

	<span style="color:#75715e">// 最常用的方式，带单个循环条件。
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1</span>
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">3</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>)
		<span style="color:#a6e22e">i</span> = <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
	}

	<span style="color:#75715e">// 经典的初始化/条件/后续形式 `for` 循环。
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">j</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">7</span>; <span style="color:#a6e22e">j</span> <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">9</span>; <span style="color:#a6e22e">j</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">j</span>)
	}

	<span style="color:#75715e">// 不带条件的 `for` 循环将一直执行，直到在循环体内使用了 `break` 或者 `return` 来跳出循环。
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;loop&#34;</span>)
		<span style="color:#66d9ef">break</span>
	}
}
	
<span style="color:#75715e">// $ go run for.go
</span><span style="color:#75715e">// 1
</span><span style="color:#75715e">// 2
</span><span style="color:#75715e">// 3
</span><span style="color:#75715e">// 7
</span><span style="color:#75715e">// 8
</span><span style="color:#75715e">// 9
</span><span style="color:#75715e">// loop
</span></code></pre></div><h3 id="6-ifelse-分支">6. if/else 分支</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// `if` 和 `else` 分支结构在 Go 中当然是直接了当的了。
</span><span style="color:#75715e"></span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

    <span style="color:#75715e">// 这里是一个基本的例子。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#ae81ff">7</span><span style="color:#f92672">%</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;7 is even&#34;</span>)
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;7 is odd&#34;</span>)
    }

    <span style="color:#75715e">// 你可以不要 `else` 只用 `if` 语句。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#ae81ff">8</span><span style="color:#f92672">%</span><span style="color:#ae81ff">4</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;8 is divisible by 4&#34;</span>)
    }

    <span style="color:#75715e">// 在条件语句之前可以有一个语句；任何在这里声明的变量
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 都可以在所有的条件分支中使用。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">num</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">9</span>; <span style="color:#a6e22e">num</span> &lt; <span style="color:#ae81ff">0</span> {
        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">num</span>, <span style="color:#e6db74">&#34;is negative&#34;</span>)
    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">num</span> &lt; <span style="color:#ae81ff">10</span> {
        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">num</span>, <span style="color:#e6db74">&#34;has 1 digit&#34;</span>)
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">num</span>, <span style="color:#e6db74">&#34;has multiple digits&#34;</span>)
    }
}

<span style="color:#75715e">// 注意，在 Go 中，你可以不适用圆括号，但是花括号是需
</span><span style="color:#75715e">// 要的。
</span><span style="color:#75715e"></span>
</code></pre></div><blockquote>
<p>Go 里没有三目运算符，所以即使你只需要基本的条件判断，你仍需要使用完整的 if 语句。</p>
</blockquote>
<h3 id="7-switch-分支结构">7. switch 分支结构</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// _switch_ ，方便的条件分支语句。
</span><span style="color:#75715e"></span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;time&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#75715e">// 一个基本的 `switch`。
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">2</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Print</span>(<span style="color:#e6db74">&#34;write &#34;</span>, <span style="color:#a6e22e">i</span>, <span style="color:#e6db74">&#34; as &#34;</span>)

	<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">i</span> {
		<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">1</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;one&#34;</span>)
		<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">2</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;two&#34;</span>)
		<span style="color:#66d9ef">case</span> <span style="color:#ae81ff">3</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;three&#34;</span>)
	}

	<span style="color:#75715e">// 在一个 `case` 语句中，你可以使用逗号来分隔多个表达式。在这个例子中，我们很好的使用了可选的`default` 分支。
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>().<span style="color:#a6e22e">Weekday</span>() {
		<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Saturday</span>, <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Sunday</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;it&#39;s the weekend&#34;</span>)
		<span style="color:#66d9ef">default</span>:
			<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;it&#39;s a weekday&#34;</span>)
	}

	<span style="color:#75715e">// 不带表达式的 `switch` 是实现 if/else 逻辑的另一种方式。这里展示了 `case` 表达式是如何使用非常量的。
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">t</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Now</span>()
	<span style="color:#66d9ef">switch</span> {
		<span style="color:#66d9ef">case</span> <span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">Hour</span>() &lt; <span style="color:#ae81ff">12</span>:
				<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;it&#39;s before noon&#34;</span>)
		<span style="color:#66d9ef">default</span>:
				<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;it&#39;s after noon&#34;</span>)
	}
}

<span style="color:#75715e">// todo: type switches
</span></code></pre></div><h3 id="8-数组">8. 数组</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// 在 Go 中，_数组_ 是一个固定长度的数列。
</span><span style="color:#75715e"></span>
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// 这里我们创建了一个数组 `a` 来存放刚好 5 个 `int`。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 元素的类型和长度都是数组类型的一部分。数组默认是
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 零值的，对于 `int` 数组来说也就是 `0`。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> [<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;emp:&#34;</span>, <span style="color:#a6e22e">a</span>)

    <span style="color:#75715e">// 我们可以使用 `array[index] = value` 语法来设置数组
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 指定位置的值，或者用 `array[index]` 得到值。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">4</span>] = <span style="color:#ae81ff">100</span>
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;set:&#34;</span>, <span style="color:#a6e22e">a</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;get:&#34;</span>, <span style="color:#a6e22e">a</span>[<span style="color:#ae81ff">4</span>])

    <span style="color:#75715e">// 使用内置函数 `len` 返回数组的长度
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len:&#34;</span>, len(<span style="color:#a6e22e">a</span>))

    <span style="color:#75715e">// 使用这个语法在一行内初始化一个数组
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">5</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>}
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;dcl:&#34;</span>, <span style="color:#a6e22e">b</span>)

    <span style="color:#75715e">// 数组的存储类型是单一的，但是你可以组合这些数据
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 来构造多维的数据结构。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">twoD</span> [<span style="color:#ae81ff">2</span>][<span style="color:#ae81ff">3</span>]<span style="color:#66d9ef">int</span>
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">2</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
        <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">j</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">j</span> &lt; <span style="color:#ae81ff">3</span>; <span style="color:#a6e22e">j</span><span style="color:#f92672">++</span> {
            <span style="color:#a6e22e">twoD</span>[<span style="color:#a6e22e">i</span>][<span style="color:#a6e22e">j</span>] = <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">j</span>
        }
    }
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;2d: &#34;</span>, <span style="color:#a6e22e">twoD</span>)
}

</code></pre></div><h3 id="9-切片">9. 切片</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// _Slice_ 是 Go 中一个重要的数据类型，它提供了比数组更强大的序列交互方式。
</span><span style="color:#75715e"></span>
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

    <span style="color:#75715e">// 与数组不同，slice 的类型仅由它所包含的元素的类型决定（与元素个数无关）。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 要创建一个长度不为 0 的空 slice，需要使用内建函数 `make`。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 这里我们创建了一个长度为 3 的 `string` 类型的 slice（初始值为零值）。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">string</span>, <span style="color:#ae81ff">3</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;emp:&#34;</span>, <span style="color:#a6e22e">s</span>)

    <span style="color:#75715e">// 我们可以和数组一样设置和得到值
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">0</span>] = <span style="color:#e6db74">&#34;a&#34;</span>
    <span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">1</span>] = <span style="color:#e6db74">&#34;b&#34;</span>
    <span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">2</span>] = <span style="color:#e6db74">&#34;c&#34;</span>
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;set:&#34;</span>, <span style="color:#a6e22e">s</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;get:&#34;</span>, <span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">2</span>])

    <span style="color:#75715e">// `len` 返回 slice 的长度
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len:&#34;</span>, len(<span style="color:#a6e22e">s</span>))

    <span style="color:#75715e">// 除了基本操作外，slice 支持比数组更丰富的操作。比如 slice 支持内建函数 `append`，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 该函数会返回一个包含了一个或者多个新值的 slice。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 注意由于 `append` 可能返回一个新的 slice，我们需要接收其返回值。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">s</span> = append(<span style="color:#a6e22e">s</span>, <span style="color:#e6db74">&#34;d&#34;</span>)
    <span style="color:#a6e22e">s</span> = append(<span style="color:#a6e22e">s</span>, <span style="color:#e6db74">&#34;e&#34;</span>, <span style="color:#e6db74">&#34;f&#34;</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;apd:&#34;</span>, <span style="color:#a6e22e">s</span>)

    <span style="color:#75715e">// slice 还可以 `copy`。这里我们创建一个空的和 `s` 有相同长度的 slice——`c`，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 然后将 `s` 复制给 `c`。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">string</span>, len(<span style="color:#a6e22e">s</span>))
    copy(<span style="color:#a6e22e">c</span>, <span style="color:#a6e22e">s</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;cpy:&#34;</span>, <span style="color:#a6e22e">c</span>)

    <span style="color:#75715e">// slice 支持通过 `slice[low:high]` 语法进行“切片”操作。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 例如，右边的操作可以得到一个包含元素 `s[2]`、`s[3]` 和 `s[4]` 的 slice。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">l</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">2</span>:<span style="color:#ae81ff">5</span>]
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;sl1:&#34;</span>, <span style="color:#a6e22e">l</span>)

    <span style="color:#75715e">// 这个 slice 包含从 `s[0]` 到 `s[5]`（不包含 5）的元素。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">l</span> = <span style="color:#a6e22e">s</span>[:<span style="color:#ae81ff">5</span>]
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;sl2:&#34;</span>, <span style="color:#a6e22e">l</span>)

    <span style="color:#75715e">// 这个 slice 包含从 `s[2]`（包含 2）之后的元素。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">l</span> = <span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">2</span>:]
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;sl3:&#34;</span>, <span style="color:#a6e22e">l</span>)

    <span style="color:#75715e">// 我们可以在一行代码中声明并初始化一个 slice 变量。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">t</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;g&#34;</span>, <span style="color:#e6db74">&#34;h&#34;</span>, <span style="color:#e6db74">&#34;i&#34;</span>}
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;dcl:&#34;</span>, <span style="color:#a6e22e">t</span>)

    <span style="color:#75715e">// Slice 可以组成多维数据结构。内部的 slice 长度可以不一致，这一点和多维数组不同。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">twoD</span> <span style="color:#f92672">:=</span> make([][]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">3</span>)
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">3</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
        <span style="color:#a6e22e">innerLen</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>
        <span style="color:#a6e22e">twoD</span>[<span style="color:#a6e22e">i</span>] = make([]<span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">innerLen</span>)
        <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">j</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">j</span> &lt; <span style="color:#a6e22e">innerLen</span>; <span style="color:#a6e22e">j</span><span style="color:#f92672">++</span> {
            <span style="color:#a6e22e">twoD</span>[<span style="color:#a6e22e">i</span>][<span style="color:#a6e22e">j</span>] = <span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">j</span>
        }
    }
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;2d: &#34;</span>, <span style="color:#a6e22e">twoD</span>)
}
</code></pre></div><h3 id="10-map">10 Map</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// _map_ 是 Go 内建的[关联数据类型](http://zh.wikipedia.org/wiki/关联数组)
</span><span style="color:#75715e">// （在一些其他的语言中也被称为 _哈希(hash)_ 或者 _字典(dict)_ ）。
</span><span style="color:#75715e"></span>
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

    <span style="color:#75715e">// 要创建一个空 map，需要使用内建函数 `make`：`make(map[key-type]val-type)`。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">m</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>)

    <span style="color:#75715e">// 使用典型的 `make[key] = val` 语法来设置键值对。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;k1&#34;</span>] = <span style="color:#ae81ff">7</span>
    <span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;k2&#34;</span>] = <span style="color:#ae81ff">13</span>

    <span style="color:#75715e">// 打印 map。例如，使用 `fmt.Println` 打印一个 map，会输出它所有的键值对。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;map:&#34;</span>, <span style="color:#a6e22e">m</span>)

    <span style="color:#75715e">// 使用 `name[key]` 来获取一个键的值。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">v1</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;k1&#34;</span>]
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;v1: &#34;</span>, <span style="color:#a6e22e">v1</span>)

    <span style="color:#75715e">// 内建函数 `len` 可以返回一个 map 的键值对数量。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;len:&#34;</span>, len(<span style="color:#a6e22e">m</span>))

    <span style="color:#75715e">// 内建函数 `delete` 可以从一个 map 中移除键值对。
</span><span style="color:#75715e"></span>    delete(<span style="color:#a6e22e">m</span>, <span style="color:#e6db74">&#34;k2&#34;</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;map:&#34;</span>, <span style="color:#a6e22e">m</span>)

    <span style="color:#75715e">// 当从一个 map 中取值时，还有可以选择是否接收的第二个返回值，该值表明了 map 中是否存在这个键。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 这可以用来消除 `键不存在` 和 `键的值为零值` 产生的歧义，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 例如 `0` 和 `&#34;&#34;`。这里我们不需要值，所以用 _空白标识符(blank identifier)_ _ 将其忽略。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">prs</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;k2&#34;</span>]
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;prs:&#34;</span>, <span style="color:#a6e22e">prs</span>)

    <span style="color:#75715e">// 你也可以通过右边的语法在一行代码中声明并初始化一个新的 map。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">n</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>{<span style="color:#e6db74">&#34;foo&#34;</span>: <span style="color:#ae81ff">1</span>, <span style="color:#e6db74">&#34;bar&#34;</span>: <span style="color:#ae81ff">2</span>}
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;map:&#34;</span>, <span style="color:#a6e22e">n</span>)
}

<span style="color:#75715e">// map: map[k1:7 k2:13]
</span><span style="color:#75715e">// v1:  7
</span><span style="color:#75715e">// len: 2
</span><span style="color:#75715e">// map: map[k1:7]
</span><span style="color:#75715e">// prs: false
</span><span style="color:#75715e">// map: map[bar:2 foo:1]
</span></code></pre></div><h4 id="12-range-遍历">12. Range 遍历</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// _range_ 用于迭代各种各样的数据结构。
</span><span style="color:#75715e">// 让我们来看看如何在我们已经学过的数据结构上使用 `range`。
</span><span style="color:#75715e"></span>
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

    <span style="color:#75715e">// 这里我们使用 `range` 来对 slice 中的元素求和。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 数组也可以用这种方法初始化并赋初值。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">nums</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>}
    <span style="color:#a6e22e">sum</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">num</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">nums</span> {
        <span style="color:#a6e22e">sum</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">num</span>
    }
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;sum:&#34;</span>, <span style="color:#a6e22e">sum</span>)

    <span style="color:#75715e">// `range` 在数组和 slice 中提供对每项的索引和值的访问。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 上面我们不需要索引，所以我们使用 _空白标识符_ `_` 将其忽略。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 实际上，我们有时候是需要这个索引的。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">num</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">nums</span> {
        <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">num</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">3</span> {
            <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;index:&#34;</span>, <span style="color:#a6e22e">i</span>)
        }
    }

    <span style="color:#75715e">// `range` 在 map 中迭代键值对。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">kvs</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;a&#34;</span>: <span style="color:#e6db74">&#34;apple&#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span>: <span style="color:#e6db74">&#34;banana&#34;</span>}
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">kvs</span> {
        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%s -&gt; %s\n&#34;</span>, <span style="color:#a6e22e">k</span>, <span style="color:#a6e22e">v</span>)
    }

    <span style="color:#75715e">// `range` 也可以只遍历 map 的键。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">k</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">kvs</span> {
        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;key:&#34;</span>, <span style="color:#a6e22e">k</span>)
    }

    <span style="color:#75715e">// `range` 在字符串中迭代 unicode 码点(code point)。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 第一个返回值是字符的起始字节位置，然后第二个是字符本身。
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#e6db74">&#34;go&#34;</span> {
        <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">c</span>)
    }
}


</code></pre></div><h4 id="13-函数">13. 函数</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// _函数_ 是 Go 的核心。我们将通过一些不同的例子来进行学习它。
</span><span style="color:#75715e"></span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#75715e">// 这里是一个函数，接受两个 `int` 并且以 `int` 返回它们的和
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">plus</span>(<span style="color:#a6e22e">a</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
    <span style="color:#75715e">// Go 需要明确的 return，也就是说，它不会自动 return 最后一个表达式的值
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">b</span>
}

<span style="color:#75715e">// 当多个连续的参数为同样类型时，
</span><span style="color:#75715e">// 可以仅声明最后一个参数的类型，忽略之前相同类型参数的类型声明。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">plusPlus</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>, <span style="color:#a6e22e">c</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">c</span>
}

<span style="color:#75715e">// Go 原生支持 _多返回值_。
</span><span style="color:#75715e">// 这个特性在 Go 语言中经常用到，例如用来同时返回一个函数的结果和错误信息。
</span><span style="color:#75715e">// `(int, int)` 在这个函数中标志着这个函数返回 2 个 `int`。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">vals</span>() (<span style="color:#66d9ef">int</span>, <span style="color:#66d9ef">int</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">7</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// 通过 `函数名(参数列表)` 来调用函数，
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">res</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">plus</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;1+2 =&#34;</span>, <span style="color:#a6e22e">res</span>)

    <span style="color:#a6e22e">res</span> = <span style="color:#a6e22e">plusPlus</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;1+2+3 =&#34;</span>, <span style="color:#a6e22e">res</span>)

    <span style="color:#75715e">// 这里我们通过 _多赋值_ 操作来使用这两个不同的返回值。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vals</span>()
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">b</span>)

    <span style="color:#75715e">// 如果你仅仅需要返回值的一部分的话，你可以使用空白标识符 `_`。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">vals</span>()
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">c</span>)
}

</code></pre></div><h4 id="14可变参数函数">14.可变参数函数</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">
<span style="color:#75715e">// [_可变参数函数_](https://zh.wikipedia.org/wiki/%E5%8F%AF%E8%AE%8A%E5%8F%83%E6%95%B8%E5%87%BD%E6%95%B8)。
</span><span style="color:#75715e">// 在调用时可以传递任意数量的参数。
</span><span style="color:#75715e">// 例如，`fmt.Println` 就是一个常见的变参函数。
</span><span style="color:#75715e"></span>
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#75715e">// 这个函数接受任意数量的 `int` 作为参数。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sum</span>(<span style="color:#a6e22e">nums</span> <span style="color:#f92672">...</span><span style="color:#66d9ef">int</span>) {
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Print</span>(<span style="color:#a6e22e">nums</span>, <span style="color:#e6db74">&#34; &#34;</span>)
    <span style="color:#a6e22e">total</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">num</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">nums</span> {
        <span style="color:#a6e22e">total</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">num</span>
    }
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">total</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

    <span style="color:#75715e">// 变参函数使用常规的调用方式，传入独立的参数。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">sum</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>)
    <span style="color:#a6e22e">sum</span>(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>)

    <span style="color:#75715e">// 如果你有一个含有多个值的 slice，想把它们作为参数使用，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 你需要这样调用 `func(slice...)`。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">nums</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>}

    <span style="color:#75715e">// ...展开符
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">sum</span>(<span style="color:#a6e22e">nums</span><span style="color:#f92672">...</span>)
}
</code></pre></div><h4 id="15闭包">15闭包</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// Go 支持[_匿名函数_](http://zh.wikipedia.org/wiki/%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0)，
</span><span style="color:#75715e">// 并能用其构造 &lt;a href=&#34;http://zh.wikipedia.org/wiki/%E9%97%AD%E5%8C%85_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)&#34;&gt;&lt;em&gt;闭包&lt;/em&gt;&lt;/a&gt;。
</span><span style="color:#75715e">// 匿名函数在你想定义一个不需要命名的内联函数时是很实用的。
</span><span style="color:#75715e"></span>
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#75715e">// `intSeq` 函数返回一个在其函数体内定义的匿名函数。
</span><span style="color:#75715e">// 返回的函数使用闭包的方式 _隐藏_ 变量 `i`。
</span><span style="color:#75715e">// 返回的函数 _隐藏_ 变量 `i` 以形成闭包。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">intSeq</span>() <span style="color:#66d9ef">func</span>() <span style="color:#66d9ef">int</span> {
    <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">func</span>() <span style="color:#66d9ef">int</span> {
        <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">i</span>
    }
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// 我们调用 `intSeq` 函数，将返回值（一个函数）赋给 `nextInt`。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 这个函数的值包含了自己的值 `i`，这样在每次调用 `nextInt` 时，都会更新 `i` 的值。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">nextInt</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">intSeq</span>()

    <span style="color:#75715e">// 通过多次调用 `nextInt` 来看看闭包的效果。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">nextInt</span>())
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">nextInt</span>())
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">nextInt</span>())

    <span style="color:#75715e">// 为了确认这个状态对于这个特定的函数是唯一的，我们重新创建并测试一下。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">newInts</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">intSeq</span>()
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">newInts</span>())
}

</code></pre></div><h4 id="16-递归">16. 递归</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// Go 支持 &lt;a href=&#34;http://zh.wikipedia.org/wiki/%E9%80%92%E5%BD%92_(%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6)&#34;&gt;&lt;em&gt;递归&lt;/em&gt;&lt;/a&gt;。
</span><span style="color:#75715e">// 这里是一个经典的阶乘示例。
</span><span style="color:#75715e"></span>
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#75715e">// `fact` 函数在到达 `fact(0)` 前一直调用自身。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">fact</span>(<span style="color:#a6e22e">n</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">n</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>
    }
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">n</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">fact</span>(<span style="color:#a6e22e">n</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">fact</span>(<span style="color:#ae81ff">7</span>))
}

</code></pre></div><h4 id="17-指针">17. 指针</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// Go 支持 &lt;em&gt;&lt;a href=&#34;http://zh.wikipedia.org/wiki/%E6%8C%87%E6%A8%99_(%E9%9B%BB%E8%85%A6%E7%A7%91%E5%AD%B8)&#34;&gt;指针&lt;/a&gt;&lt;/em&gt;，
</span><span style="color:#75715e">// 允许在程序中通过 `引用传递` 来传递值和数据结构。
</span><span style="color:#75715e"></span>
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#75715e">// 我们将通过两个函数：`zeroval` 和 `zeroptr` 来比较 `指针` 和 `值`。
</span><span style="color:#75715e">// `zeroval` 有一个 `int` 型参数，所以使用值传递。
</span><span style="color:#75715e">// `zeroval` 将从调用它的那个函数中得到一个实参的拷贝：ival。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">zeroval</span>(<span style="color:#a6e22e">ival</span> <span style="color:#66d9ef">int</span>) {
    <span style="color:#a6e22e">ival</span> = <span style="color:#ae81ff">0</span>
}

<span style="color:#75715e">// `zeroptr` 有一个和上面不同的参数：`*int`，这意味着它使用了 `int` 指针。
</span><span style="color:#75715e">// 紧接着，函数体内的 `*iptr` 会 _解引用_ 这个指针，从它的内存地址得到这个地址当前对应的值。
</span><span style="color:#75715e">// 对解引用的指针赋值，会改变这个指针引用的真实地址的值。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">zeroptr</span>(<span style="color:#a6e22e">iptr</span> <span style="color:#f92672">*</span><span style="color:#66d9ef">int</span>) {
    <span style="color:#f92672">*</span><span style="color:#a6e22e">iptr</span> = <span style="color:#ae81ff">0</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1</span>
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;initial:&#34;</span>, <span style="color:#a6e22e">i</span>)

    <span style="color:#a6e22e">zeroval</span>(<span style="color:#a6e22e">i</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;zeroval:&#34;</span>, <span style="color:#a6e22e">i</span>)

    <span style="color:#75715e">// 通过 `&amp;i` 语法来取得 `i` 的内存地址，即指向 `i` 的指针。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">zeroptr</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">i</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;zeroptr:&#34;</span>, <span style="color:#a6e22e">i</span>)

    <span style="color:#75715e">// 指针也是可以被打印的。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;pointer:&#34;</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">i</span>)
}

<span style="color:#75715e">// initial: 1
</span><span style="color:#75715e">// zeroval: 1
</span><span style="color:#75715e">// zeroptr: 0
</span><span style="color:#75715e">// pointer: 0xc00002c008
</span></code></pre></div><h4 id="17-结构体">17. 结构体</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// Go 的_结构体(struct)_ 是带类型的字段(fields)集合。
</span><span style="color:#75715e">// 这在组织数据时非常有用。
</span><span style="color:#75715e"></span>
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#75715e">// 这里的 `person` 结构体包含了 `name` 和 `age` 两个字段。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">person</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">name</span> <span style="color:#66d9ef">string</span>
    <span style="color:#a6e22e">age</span>  <span style="color:#66d9ef">int</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

    <span style="color:#75715e">// 使用这个语法创建新的结构体元素。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">person</span>{<span style="color:#e6db74">&#34;Bob&#34;</span>, <span style="color:#ae81ff">20</span>})

    <span style="color:#75715e">// 你可以在初始化一个结构体元素时指定字段名字。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">person</span>{<span style="color:#a6e22e">name</span>: <span style="color:#e6db74">&#34;Alice&#34;</span>, <span style="color:#a6e22e">age</span>: <span style="color:#ae81ff">30</span>})

    <span style="color:#75715e">// 省略的字段将被初始化为零值。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">person</span>{<span style="color:#a6e22e">name</span>: <span style="color:#e6db74">&#34;Fred&#34;</span>})

    <span style="color:#75715e">// `&amp;` 前缀生成一个结构体指针。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">person</span>{<span style="color:#a6e22e">name</span>: <span style="color:#e6db74">&#34;Ann&#34;</span>, <span style="color:#a6e22e">age</span>: <span style="color:#ae81ff">40</span>})

    <span style="color:#75715e">// 使用`.`来访问结构体字段。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">person</span>{<span style="color:#a6e22e">name</span>: <span style="color:#e6db74">&#34;Sean&#34;</span>, <span style="color:#a6e22e">age</span>: <span style="color:#ae81ff">50</span>}
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">name</span>)

    <span style="color:#75715e">// 也可以对结构体指针使用`.` - 指针会被自动解引用。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">sp</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">s</span>
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">sp</span>.<span style="color:#a6e22e">age</span>)

    <span style="color:#75715e">// 结构体是可变(mutable)的。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">sp</span>.<span style="color:#a6e22e">age</span> = <span style="color:#ae81ff">51</span>
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">sp</span>.<span style="color:#a6e22e">age</span>)
}

</code></pre></div><h4 id="18-方法">18. 方法</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// Go 支持为结构体类型定义_方法(methods)_ 。
</span><span style="color:#75715e"></span>
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">rect</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">width</span>, <span style="color:#a6e22e">height</span> <span style="color:#66d9ef">int</span>
}

<span style="color:#75715e">// 这里的 `area` 是一个拥有 `*rect` 类型接收器(receiver)的方法。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">rect</span>) <span style="color:#a6e22e">area</span>() <span style="color:#66d9ef">int</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">height</span>
}

<span style="color:#75715e">// 可以为值类型或者指针类型的接收者定义方法。
</span><span style="color:#75715e">// 这是一个值类型接收者的例子。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#a6e22e">rect</span>) <span style="color:#a6e22e">perim</span>() <span style="color:#66d9ef">int</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span><span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span><span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">height</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">r</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">rect</span>{<span style="color:#a6e22e">width</span>: <span style="color:#ae81ff">10</span>, <span style="color:#a6e22e">height</span>: <span style="color:#ae81ff">5</span>}

    <span style="color:#75715e">// 这里我们调用上面为结构体定义的两个方法。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;area: &#34;</span>, <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">area</span>())
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;perim:&#34;</span>, <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">perim</span>())

    <span style="color:#75715e">// 调用方法时，Go 会自动处理值和指针之间的转换。
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 想要避免在调用方法时产生一个拷贝，或者想让方法可以修改接受结构体的值，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 你都可以使用指针来调用方法。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">rp</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">r</span>
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;area: &#34;</span>, <span style="color:#a6e22e">rp</span>.<span style="color:#a6e22e">area</span>())
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;perim:&#34;</span>, <span style="color:#a6e22e">rp</span>.<span style="color:#a6e22e">perim</span>())
}
</code></pre></div><h3 id="19-接口">19. 接口</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// 方法签名的集合叫做：_接口(Interfaces)_。
</span><span style="color:#75715e"></span>
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;fmt&#34;</span>
    <span style="color:#e6db74">&#34;math&#34;</span>
)

<span style="color:#75715e">// 这是一个几何体的基本接口。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">geometry</span> <span style="color:#66d9ef">interface</span> {
    <span style="color:#a6e22e">area</span>() <span style="color:#66d9ef">float64</span>
    <span style="color:#a6e22e">perim</span>() <span style="color:#66d9ef">float64</span>
}

<span style="color:#75715e">// 在这个例子中，我们将为 `rect` 和 `circle` 实现该接口。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">rect</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">width</span>, <span style="color:#a6e22e">height</span> <span style="color:#66d9ef">float64</span>
}
<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">circle</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">radius</span> <span style="color:#66d9ef">float64</span>
}

<span style="color:#75715e">// 要在 Go 中实现一个接口，我们只需要实现接口中的所有方法。
</span><span style="color:#75715e">// 这里我们为 `rect` 实现了 `geometry` 接口。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#a6e22e">rect</span>) <span style="color:#a6e22e">area</span>() <span style="color:#66d9ef">float64</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">height</span>
}
<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">r</span> <span style="color:#a6e22e">rect</span>) <span style="color:#a6e22e">perim</span>() <span style="color:#66d9ef">float64</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span><span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">width</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">*</span><span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">height</span>
}

<span style="color:#75715e">// `circle` 的实现。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">circle</span>) <span style="color:#a6e22e">area</span>() <span style="color:#66d9ef">float64</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">math</span>.<span style="color:#a6e22e">Pi</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">radius</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">radius</span>
}
<span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">c</span> <span style="color:#a6e22e">circle</span>) <span style="color:#a6e22e">perim</span>() <span style="color:#66d9ef">float64</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">math</span>.<span style="color:#a6e22e">Pi</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">c</span>.<span style="color:#a6e22e">radius</span>
}

<span style="color:#75715e">// 如果一个变量实现了某个接口，我们就可以调用指定接口中的方法。
</span><span style="color:#75715e">// 这儿有一个通用的 `measure` 函数，我们可以通过它来使用所有的 `geometry`。
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">measure</span>(<span style="color:#a6e22e">g</span> <span style="color:#a6e22e">geometry</span>) {
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">g</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">area</span>())
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">g</span>.<span style="color:#a6e22e">perim</span>())
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">r</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">rect</span>{<span style="color:#a6e22e">width</span>: <span style="color:#ae81ff">3</span>, <span style="color:#a6e22e">height</span>: <span style="color:#ae81ff">4</span>}
    <span style="color:#a6e22e">c</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">circle</span>{<span style="color:#a6e22e">radius</span>: <span style="color:#ae81ff">5</span>}

    <span style="color:#75715e">// 结构体类型 `circle` 和 `rect` 都实现了 `geometry` 接口，
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 所以我们可以将其实例作为 `measure` 的参数。
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">measure</span>(<span style="color:#a6e22e">r</span>)
    <span style="color:#a6e22e">measure</span>(<span style="color:#a6e22e">c</span>)
}

</code></pre></div><h3 id="参考资料">参考资料</h3>
<ul>
<li><a href="https://gobyexample.com/">Go by Example</a></li>
<li><a href="https://gobyexample-cn.github.io/">Go by Example 中文版</a></li>
</ul>

    </div>
    
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h"
              >Read other posts</span
            >
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="/posts/js-for/">
                  <span class="button__icon">←</span>
                  <span class="button__text">Js For</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="/posts/go-import/">
                  <span class="button__text">Go Import</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    

    
      
        

<div id="gitalk-container"></div>
<script>
  const gitalk = new Gitalk({
    clientID: '4655ac5540fffb80a545',
    clientSecret: '714d4e40a23897dc8e329b9d1ec37a1ffe8fd5d3',
    repo: 'https://github.com/strawbreey/notes',      
    owner: 'strawbreey',
    admin: ['strawbreey'],
    id: location.pathname,      
    distractionFreeMode: false  
  })

  gitalk.render('gitalk-container')
</script>
      
    
  </div>

  <aside class="aside table-of-contents">
    
    <section class="toc">
        <h3>title</h3>
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-编译">1. 编译</a></li>
        <li><a href="#2-字符串">2. 字符串</a></li>
        <li><a href="#3-变量">3. 变量</a></li>
        <li><a href="#4-常量">4. 常量</a></li>
        <li><a href="#5-for-循环">5. For 循环</a></li>
        <li><a href="#6-ifelse-分支">6. if/else 分支</a></li>
        <li><a href="#7-switch-分支结构">7. switch 分支结构</a></li>
        <li><a href="#8-数组">8. 数组</a></li>
        <li><a href="#9-切片">9. 切片</a></li>
        <li><a href="#10-map">10 Map</a></li>
        <li><a href="#19-接口">19. 接口</a></li>
        <li><a href="#参考资料">参考资料</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </section>

    


<section class="related">
  <h3>See Also</h3>
  <ul>
    
    <li><a href="/posts/go-import/">Go Import</a></li>
    
    <li><a href="/posts/js-arguments/">Js Arguments</a></li>
    
    <li><a href="/posts/js-revisited/">Js Revisited</a></li>
    
    <li><a href="/posts/vue-reactivity/">Vue Reactivity</a></li>
    
    <li><a href="/posts/scss-difference-sass/">Scss Difference Sass</a></li>
    
  </ul>
  
</section>
  </aside>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">Copyright©2019-2020 Strawbreey. All Rights Reserved</div>
      
  </div>
</footer>

<script src="/assets/main.js"></script>





<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.3.2/build/highlight.min.js"></script>




      
    </div>

    
  </body>
</html>
