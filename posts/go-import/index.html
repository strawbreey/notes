<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>
        Go Import ::
        Strawbreey Notes
      </title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta
  name="description"
  content="可以在一个 Go语言源文件包声明语句之后，其它非导入声明语句之前，包含零到多个导入包声明语句。 每个导入声明可以单独指定一个导入路径，也可以通过"
/>
<meta
  name="keywords"
  content=""
/>
<meta name="robots" content="noodp" />
<link rel="canonical" href="/posts/go-import/" />





<link rel="stylesheet" href="/assets/style.css" />

<link rel="stylesheet" href="/style.css" />


<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.3.2/build/styles/atom-one-dark.min.css">

<link
  rel="apple-touch-icon-precomposed"
  sizes="144x144"
  href="/img/apple-touch-icon-144-precomposed.png"
/>
<link rel="shortcut icon" href="/favicon.png" />

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>




<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Go Import"/>
<meta name="twitter:description" content="可以在一个 Go语言源文件包声明语句之后，其它非导入声明语句之前，包含零到多个导入包声明语句。 每个导入声明可以单独指定一个导入路径，也可以通过"/>



<meta property="og:title" content="Go Import" />
<meta property="og:description" content="可以在一个 Go语言源文件包声明语句之后，其它非导入声明语句之前，包含零到多个导入包声明语句。 每个导入声明可以单独指定一个导入路径，也可以通过" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/go-import/" />
<meta property="article:published_time" content="2020-12-14T11:29:30+08:00" />
<meta property="article:modified_time" content="2020-12-14T11:29:30+08:00" /><meta property="og:site_name" content="Strawbreey Notes" />






  </head>
  <body class="">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a
  href="/"
  class="logo"
  style="text-decoration: none;"
>
  
    
    <span class="logo__text">
      Strawbreey Notes
    </span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/showcase">Showcase</a></li>
        
      
      
      
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/showcase">Showcase</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none" />
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg
  class="theme-toggler"
  width="24"
  height="24"
  viewBox="0 0 48 48"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
>
  <path
    d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"
  />
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  
  

  <div class="post">
    <h1 class="post-title">Go Import</h1>
    <div class="post-meta">
      
        <span class="post-date">
          2020-12-14
        </span>

        
          
        
      

      


      
        <span class="post-read-time"
          >— 3 min read</span
        >
      
    </div>

    

    

    <div class="post-content">
      <p>可以在一个 Go语言源文件包声明语句之后，其它非导入声明语句之前，包含零到多个导入包声明语句。</p>
<p>每个导入声明可以单独指定一个导入路径，也可以通过圆括号同时导入多个导入路径。</p>
<p>要引用其他包的标识符，可以使用 import 关键字，导入的包名使用双引号包围，包名是从 GOPATH 开始计算的路径，使用/进行路径分隔。</p>
<p>默认导入的写法</p>
<p>导入有两种基本格式，即单行导入和多行导入，两种导入方法的导入代码效果是一致的。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#75715e">// 1. 单行导入 单行导入格式如下：
</span><span style="color:#75715e"></span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;math&#34;</span>

<span style="color:#75715e">// 2. 多行导入 当多行导入时，包名在 import 中的顺序不影响导入效果，格式如下：
</span><span style="color:#75715e"></span><span style="color:#f92672">import</span>(
  <span style="color:#e6db74">&#34;fmt&#34;</span>
  <span style="color:#e6db74">&#34;math&#34;</span>
)

</code></pre></div><p>Go was designed to be a language that encourages good software engineering practices. An important part of high quality software is code reuse – embodied in the principle “Don&rsquo;t Repeat Yourself.”</p>
<p>As we saw in chapter 7 functions are the first layer we turn to allow code reuse. Go also provides another mechanism for code reuse: packages. Nearly every program we&rsquo;ve seen so far included this line:</p>
<p>import &ldquo;fmt&rdquo;
fmt is the name of a package that includes a variety of functions related to formatting and output to the screen. Bundling code in this way serves 3 purposes:</p>
<p>It reduces the chance of having overlapping names. This keeps our function names short and succinct</p>
<p>It organizes code so that its easier to find code you want to reuse.</p>
<p>It speeds up the compiler by only requiring recompilation of smaller chunks of a program. Although we use the package fmt, we don&rsquo;t have to recompile it every time we change our program.</p>
<p>Creating Packages
Packages only really make sense in the context of a separate program which uses them. Without this separate program we have no way of using the package we create. Let&rsquo;s create an application that will use a package we will write. Create a folder in ~/src/golang-book called chapter11. Inside that folder create a file called main.go which contains this:</p>
<p>package main</p>
<p>import &ldquo;fmt&rdquo;
import &ldquo;golang-book/chapter11/math&rdquo;</p>
<p>func main() {
xs := []float64{1,2,3,4}
avg := math.Average(xs)
fmt.Println(avg)
}
Now create another folder inside of the chapter11 folder called math. Inside of this folder create a file called math.go that contains this:</p>
<p>package math</p>
<p>func Average(xs []float64) float64 {
total := float64(0)
for _, x := range xs {
total += x
}
return total / float64(len(xs))
}
Using a terminal in the math folder you just created run go install. This will compile the math.go program and create a linkable object file: ~/pkg/os_arch/golang-book/chapter11/math.a. (where os is something like windows and arch is something like amd64)</p>
<p>Now go back to the chapter11 folder and run go run main.go. You should see 2.5. Some things to note:</p>
<p>math is the name of a package that is part of Go&rsquo;s standard distribution, but since Go packages can be hierarchical we are safe to use the same name for our package. (The real math package is just math, ours is golang-book/chapter11/math)</p>
<p>When we import our math library we use its full name (import &ldquo;golang-book/chapter11/math&rdquo;), but inside of the math.go file we only use the last part of the name (package math).</p>
<p>We also only use the short name math when we reference functions from our library. If we wanted to use both libraries in the same program Go allows us to use an alias:</p>
<p>import m &ldquo;golang-book/chapter11/math&rdquo;</p>
<p>func main() {
xs := []float64{1,2,3,4}
avg := m.Average(xs)
fmt.Println(avg)
}
m is the alias.</p>
<p>You may have noticed that every function in the packages we&rsquo;ve seen start with a capital letter. In Go if something starts with a capital letter that means other packages (and programs) are able to see it. If we had named the function average instead of Average our main program would not have been able to see it.</p>
<p>It&rsquo;s a good practice to only expose the parts of our package that we want other packages using and hide everything else. This allows us to freely change those parts later without having to worry about breaking other programs, and it makes our package easier to use.</p>
<p>Package names match the folders they fall in. There are ways around this, but it&rsquo;s a lot easier if you stay within this pattern.</p>
<p>Documentation
Go has the ability to automatically generate documentation for packages we write in a similar way to the standard package documentation. In a terminal run this command:</p>
<p>godoc golang-book/chapter11/math Average
You should see information displayed for the function we just wrote. We can improve this documentation by adding a comment before the function:</p>
<p>// Finds the average of a series of numbers
func Average(xs []float64) float64 {
If you run go install in the math folder, then re-run the godoc command you should see our comment below the function definition. This documentation is also available in web form by running this command:</p>
<p>godoc -http=&rdquo;:6060&rdquo;
and entering this URL into your browser:</p>
<p>http://localhost:6060/pkg/
You should be able to browse through all of the packages installed on your system.</p>
<p>Problems
Why do we use packages?</p>
<p>What is the difference between an identifier that starts with a capital letter and one which doesn’t? (Average vs average)</p>
<p>What is a package alias? How do you make one?</p>
<p>We copied the average function from chapter 7 to our new package. Create Min and Max functions which find the minimum and maximum values in a slice of float64s.</p>
<p>How would you document the functions you created in #3?</p>

    </div>
    
    
      
        <div class="pagination">
          <div class="pagination__title">
            <span class="pagination__title-h"
              >Read other posts</span
            >
            <hr />
          </div>
          <div class="pagination__buttons">
            
              <span class="button previous">
                <a href="/posts/go-example/">
                  <span class="button__icon">←</span>
                  <span class="button__text">Go Example</span>
                </a>
              </span>
            
            
              <span class="button next">
                <a href="/posts/js-arguments/">
                  <span class="button__text">Js Arguments</span>
                  <span class="button__icon">→</span>
                </a>
              </span>
            
          </div>
        </div>
      
    

    
      
        

<div id="gitalk-container"></div>
<script>
  const gitalk = new Gitalk({
    clientID: '4655ac5540fffb80a545',
    clientSecret: '714d4e40a23897dc8e329b9d1ec37a1ffe8fd5d3',
    repo: 'https://github.com/strawbreey/notes',      
    owner: 'strawbreey',
    admin: ['strawbreey'],
    id: location.pathname,      
    distractionFreeMode: false  
  })

  gitalk.render('gitalk-container')
</script>
      
    
  </div>

  <aside class="aside table-of-contents">
    
    <section class="toc">
        <h3>title</h3>
        <nav id="TableOfContents"></nav>
    </section>

    


<section class="related">
  <h3>See Also</h3>
  <ul>
    
    <li><a href="/posts/js-arguments/">Js Arguments</a></li>
    
    <li><a href="/posts/js-revisited/">Js Revisited</a></li>
    
    <li><a href="/posts/vue-reactivity/">Vue Reactivity</a></li>
    
    <li><a href="/posts/scss-difference-sass/">Scss Difference Sass</a></li>
    
    <li><a href="/posts/scss-tutorial/">Scss Tutorial</a></li>
    
  </ul>
  
</section>
  </aside>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">Copyright©2019-2020 Strawbreey. All Rights Reserved</div>
      
  </div>
</footer>

<script src="/assets/main.js"></script>





<script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.3.2/build/highlight.min.js"></script>




      
    </div>

    
  </body>
</html>
